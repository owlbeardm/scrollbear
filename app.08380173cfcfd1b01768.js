!function(e){function n(n){for(var a,r,o=n[0],c=n[1],i=n[2],p=0,u=[];p<o.length;p++)r=o[p],t[r]&&u.push(t[r][0]),t[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(d&&d(n);u.length;)u.shift()();return s.push.apply(s,i||[]),l()}function l(){for(var e,n=0;n<s.length;n++){for(var l=s[n],a=!0,o=1;o<l.length;o++){var c=l[o];0!==t[c]&&(a=!1)}a&&(s.splice(n--,1),e=r(r.s=l[0]))}return e}var a={},t={0:0},s=[];function r(n){if(a[n])return a[n].exports;var l=a[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,r),l.l=!0,l.exports}r.m=e,r.c=a,r.d=function(e,n,l){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:l})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)r.d(l,a,function(n){return e[n]}.bind(null,a));return l},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=n,o=o.slice();for(var i=0;i<o.length;i++)n(o[i]);var d=c;s.push(["Ha7V",3,2,1]),l()}({"13op":function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("lwo9"),controller:["$log",function(e){this.$onInit=function(){e.debug("AppController init")}}]};n.default=a},"2osr":function(e,n,l){"use strict";var a=s(l("EwJf")),t=s(l("lLoU"));function s(e){return e&&e.__esModule?e:{default:e}}var r=angular.module("spelllist.components",[]);r.component("spell",a.default),r.component("spelllist",t.default)},"5A2s":function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("J235"),controller:["notificationService","filterService","spellService","$window","$state","$scope","$log","CLASSES",function(e,n,l,a,t,s,r,o){r.debug("SpellController create");var c=this,i=a.localStorage;function d(){c.otherSpellsCount=0;var e=l.getSpellsSplited();return c.total=Object.entries(e).reduce(function(e,n){return e+n[1].length},0),c.total||(c.otherSpellsCount=l.getSpellsCountByFilter()),e}c.$onInit=function(){r.debug("AppController init"),c.classes=o;var n=JSON.parse(i.getItem("SELECTED_CLASS"));c.classSelected=n&&o[n]?n:"wizard",c.setClass(),e.subscribe(s,e.FILTER_CHANGED,function(e,n){c.spells=d()})},c.search=function(){r.debug("AppController ctrl.search",c.filter),c.spells=d()},c.setClass=function(){l.setClass(c.classSelected),i.setItem("SELECTED_CLASS",JSON.stringify(c.classSelected)),c.search()},c.classToAll=function(){c.classSelected="all",c.setClass()}}]};n.default=a},"6LOo":function(e,n){e.exports='<div class="accordion" id="accordionExample">\n  <div ng-repeat="(key, value) in $ctrl.spells" class="card card-collapse">\n    <div class="card-header" role="tab" id="heading{{$index}}" data-toggle="collapse" href="#collapse{{$index}}" aria-expanded="false" aria-controls="collapse{{$index}}">\n      <h5 class="mb-0 text-primary">\n        <a >\n          {{$ctrl.classes[$ctrl.classSelected].name}} {{key}}\n          <i class="float-right fas fa-chevron-down expanded-flip"></i>\n          <div><small class=\'text-muted\'>count {{value.length}}</small></div>\n        </a>\n      </h5>\n    </div>\n\n    <div id="collapse{{$index}}" class="collapse" role="tabpanel" aria-labelledby="heading{{$index}}" data-parent="#accordionExample">\n      <div class="card-body">\n        <table class="table table-sm">\n          <tbody>\n            <tr ng-repeat="spell in value track by $index">\n              <td ng-click="$ctrl.chooseSpell(spell)">\n                <a href="#" class="text-dark">\n                  {{spell.name}}\n                </a>\n                \x3c!-- <div><small class="text-info">{{spell.duration}}</small>; <small class="text-info">{{spell.savingThrow}}</small></div> --\x3e\n              </td>\n              <td class="float-right">\n                <button type="button" rel="tooltip" title="" class="btn btn-primary btn-link btn-sm" ng-click="$ctrl.addToBook(spell)">\n                  <i class="fas fa-lg fa-book text-warning"></i>\n                  <div class="ripple-container"></div>\n                </button>\n              </td>\n              <td class="float-right">\n                <button type="button" rel="tooltip" title="" class="btn btn-primary btn-link btn-sm" ng-click="$ctrl.changeFav(spell)">\n                  <i class="fas fa-lg fa-scroll text-warning"></i>\n                  <div class="ripple-container"></div>\n                </button>\n              </td>\n\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n<button ng-if="$ctrl.otherSpellsCount" ng-click="$ctrl.classToAll()" class=\'btn btn-warning\'>Found <strong>{{$ctrl.otherSpellsCount}}</strong> spell{{$ctrl.otherSpellsCount!=1?\'s\':\'\'}} in other classes</button>\n\x3c!-- <ui-view></ui-view> --\x3e\n'},"6n4l":function(e,n,l){"use strict";l("2osr"),l("HPV/"),l("JZvU");angular.module("app.components",["spelllist.components","spellbook.components","main.components"])},"87dM":function(e,n,l){"use strict";angular.module("app.services",[]),l("TBcf"),l("BvtR"),l("vNZY"),l("LVIG")},"8dXr":function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("lq7A"),controller:["$log","$state","spellbookService","CLASSES",function(e,n,l,a){e.debug("CharactersController create");var t=this;t.$onInit=function(){e.debug("CharactersController init"),t.classes=a,t.characters=l.characters},t.delete=function(n){e.debug("CharactersController delete",n),l.deleteCharacter(n),t.characters=l.characters},t.add=function(){n.go("spellbook.newcharacter")},t.characterSelected=function(){return t.characters.indexOf(l.selectedCharacter)},t.selectCharacter=function(e){l.selectCharacter(e),e.prepared?n.go("spellbook.prepared"):n.go("spellbook.known")}}]};n.default=a},BvtR:function(e,n,l){"use strict";angular.module("app.services").factory("spellbookService",["$log","$window",function(e,n){var l={},a=n.localStorage;return l.characters=[],l.characters=JSON.parse(a.getItem("CHARACTERS"))?JSON.parse(a.getItem("CHARACTERS")):[],l.selectedCharacter=JSON.parse(a.getItem("SELECTED_CHARACTER"))?JSON.parse(a.getItem("SELECTED_CHARACTER")):void 0,l.addCharacter=function(e){l.characters.push(e),saveCharacters()},l.deleteCharacter=function(e){l.characters.splice(e,1),saveCharacters()},l.selectCharacter=function(e){l.selectedCharacter=e},l.isNameExists=function(e){return!!l.characters.find(function(n){return e.toUpperCase()==n.name.toUpperCase()})},l.saveCharacters=function(){a.setItem("CHARACTERS",JSON.stringify(l.characters))},l}])},EwJf:function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("WhGt"),controller:["$log","$rootScope","$state",function(e,n,l){e.debug("SpellController create"),this.$onInit=function(){var a=angular.element("#exampleModal");e.debug("Modal popup",a),a.on("hidden.bs.modal",function(){n.newstate?l.go(n.newstate):l.go("main")})}}],bindings:{prevstate:"<"}};n.default=a},GAHJ:function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("f1Ss"),controller:["notificationService","filterService","$log","$window","SCHOOLS",function(e,n,l,a,t){l.debug("FilterController create");var s=this,r=a.localStorage;s.$onInit=function(){l.debug("FilterController init "),JSON.parse(r.getItem("FAV_ONLY")),s.favOnly=n.favOnly,s.schools=t,s.schoolSelected="any",s.filters=[],s.setSchool()},s.search=function(){l.debug("AppController ctrl.search",s.filter),s.filters=[],"any"!=s.schoolSelected&&s.filters.push(t[s.schoolSelected].name),n.filterText=s.filter,e.notify(e.FILTER_CHANGED,void 0)},s.setSchool=function(){n.school=s.schoolSelected,s.search()},s.setFavOnly=function(){n.setFavOnly(s.favOnly),s.search()},s.reset=function(){s.filter="",s.schoolSelected="any",n.school=s.schoolSelected}}],bindings:{}};n.default=a},"HPV/":function(e,n,l){"use strict";var a=i(l("YCLP")),t=i(l("8dXr")),s=i(l("OxMV")),r=i(l("ejG7")),o=i(l("W/SU")),c=i(l("Z5a8"));function i(e){return e&&e.__esModule?e:{default:e}}var d=angular.module("spellbook.components",[]);d.component("spellbook",a.default),d.component("characters",t.default),d.component("newcharacter",s.default),d.component("prepared",r.default),d.component("spellbookSpelllist",o.default),d.component("spellbookBook",c.default)},Ha7V:function(e,n,l){"use strict";l("KHwQ"),l("2C69"),l("wmx0"),l("102d"),l("zOca"),l("6n4l"),l("QFgh"),l("87dM"),l("NxeQ");var a,t=l("13op"),s=(a=t)&&a.__esModule?a:{default:a};var r=l("M55E");"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js").then(function(e){console.log("SW registered: ",e)}).catch(function(e){console.log("SW registration failed: ",e)})});var o=angular.module("initiativeApp",["app.components","app.constants","app.services","app.filters","ui.router","ngSanitize"]);o.component("app",s.default),o.config(["$stateProvider","$locationProvider","$urlRouterProvider",function(e,n,l){e.state({name:"main",url:"/",component:"main",onEnter:["$rootScope",function(e){e.title="",e.description="Scrollbear spellbook reference for Pathfinder RPG."}]}),e.state({name:"spellbook",url:"/spellbook",component:"spellbook",onEnter:["$rootScope",function(e){e.title="Spellbook - ",e.description="Scrollbear spellbook reference for Pathfinder RPG."}]}).state({name:"spellbook.characters",url:"/characters",component:"characters"}).state({name:"spellbook.newcharacter",url:"/characters/new",component:"newcharacter"}).state({name:"spellbook.prepared",url:"/prepared",component:"prepared"}).state({name:"spellbook.list",url:"/list",component:"spellbookSpelllist"}).state({name:"spellbook.book",url:"/book",component:"spellbookBook"}),e.state({name:"spells",url:"spells/:spellUrl",parent:"main",resolve:{spell:["spellService","$stateParams",function(e,n){return e.getSpellByUrl(n.spellUrl)}],prevstate:["$transition$","$rootScope",function(e,n){return console.log("prevState",e.from()),n.newstate=e.from().name,e.from()}]},onEnter:["spell","$rootScope",function(e,n){n.title=e.name+" - ",n.spell=e;var l,a=(l=e.description,("<div>"+new r.Converter({tables:!0,strikethrough:!0}).makeHtml(l)+"</div>").replace(/<table>/g,"<div class='table-responsive'><table class='table table-sm'>").replace(/<\/table>/g,"</table></div>").replace(/<thead>/g,"<thead class='text-primary'>"));n.description=e.description,n.spellDescription=a,angular.element("#exampleModal").modal("show")}],onExit:["$transition$",function(e){"spells"!=e.to().name&&(angular.element("#exampleModal").modal("hide"),angular.element(".modal-backdrop").remove(),angular.element("body").removeClass("modal-open"))}]}),l.otherwise("/"),n.html5Mode(!0)}]),o.run(["$log","$transitions","$location","$state","$rootScope",function(e,n,l,a,t){n.onStart({},function(e){if(console.log("onBefore Transition from "+e.from().name+" to "+e.to().name),l.search()._escaped_fragment_){var n=l.search()._escaped_fragment_;l.search({}),l.path(n)}}),n.onStart({from:"spells"},function(e){t.newstate=e.to()})}])},J235:function(e,n){e.exports='<spell spell="$ctrl.spell"></spell>\n<div class="card">\n  <div class="card-header">\n    <form ng-submit="$ctrl.search()">\n      <div class="form-row">\n        <div class="col col-centered ">\n          <select class="form-control" ng-change="$ctrl.setClass()" name="classSelect" id="classSelect" ng-model="$ctrl.classSelected">\n            <option ng-repeat="(key, value) in $ctrl.classes" value="{{key}}">{{value.name}}</option>\n          </select>\n        </div>\n      </div>\n    </form>\n    <filter></filter>\n  </div>\n  <div class="card-body">\n    <spelllist spells="$ctrl.spells" class-name="$ctrl.classSelected"></spelllist>\n    <button ng-if="$ctrl.otherSpellsCount" ng-click="$ctrl.classToAll()" class=\'btn btn-warning\'>Found <strong>{{$ctrl.otherSpellsCount}}</strong> spell{{$ctrl.otherSpellsCount!=1?\'s\':\'\'}} in other classes</button>\n  </div>\n  <div class="card-footer">\n    <div class="container">\n      <span class="float-right">\n        Total: {{$ctrl.total}}\n      </span>\n    </div>\n  </div>\n</div>\n<ui-view></ui-view>\n'},JZvU:function(e,n,l){"use strict";var a=o(l("lLAa")),t=o(l("O9me")),s=o(l("GAHJ")),r=o(l("5A2s"));function o(e){return e&&e.__esModule?e:{default:e}}var c=angular.module("main.components",[]);c.component("pageheader",a.default),c.component("pagefooter",t.default),c.component("filter",s.default),c.component("main",r.default)},LVIG:function(e,n,l){"use strict";angular.module("app.services").factory("notificationService",["$rootScope","$log",function(e,n){var l={FILTER_CHANGED:"Filter:Changed",subscribe:function(n,l,a){var t=e.$on(l,a);n.$on("$destroy",t)},notify:function(l,a){n.debug("NotificationService.notify",l,a),e.$emit(l,a)}};return l}])},NxeQ:function(e,n,l){"use strict";var a=angular.module("app.constants",[]);a.constant("CLASSES",{all:{name:"All"},alchemist:{name:"Alchemist",search:["alchemist"]},antipaladin:{name:"Antipaladin",search:["antipaladin"]},arcanist:{name:"Arcanist",search:["arcanist","wizard","sorcerer"]},bard:{name:"Bard",search:["bard"]},bloodrager:{name:"Bloodrager",search:["bloodrager"]},cleric:{name:"Cleric",search:["cleric"]},druid:{name:"Druid",search:["druid"]},hunter:{name:"Hunter",search:["hunter","druid","ranger"]},inquisitor:{name:"Inquisitor",search:["inquisitor"]},investigator:{name:"Investigator",search:["investigator","alchemist"]},magus:{name:"Magus",search:["magus"]},medium:{name:"Medium",search:["medium"]},mesmerist:{name:"Mesmerist",search:["mesmerist"]},occultist:{name:"Occultist",search:["occultist"]},oracle:{name:"Oracle",search:["oracle","cleric"]},paladin:{name:"Paladin",search:["paladin"]},psychic:{name:"Psychic",search:["psychic"]},ranger:{name:"Ranger",search:["ranger"]},shaman:{name:"Shaman",search:["shaman"]},skald:{name:"Skald",search:["bard","skald"]},sorcerer:{name:"Sorcerer",search:["sorcerer"]},spiritualist:{name:"Spiritualist",search:["spiritualist"]},summoner:{name:"Summoner",search:["summoner"]},warpriest:{name:"Warpriest",search:["warpriest","cleric"]},witch:{name:"Witch",search:["witch"]},wizard:{name:"Wizard",search:["wizard","sorcerer"]}}),a.constant("SCHOOLS",{any:{name:"Any",search:function(e){return!0}},abjuration:{name:"Abjuration",search:["abjuration"]},conjuration:{name:"Conjuration",search:["conjuration"]},divination:{name:"Divination",search:["divination"]},enchantment:{name:"Enchantment",search:["enchantment"]},evocation:{name:"Evocation",search:["evocation"]},illusion:{name:"Illusion",search:["illusion"]},necromancy:{name:"Necromancy",search:["necromancy"]},transmutation:{name:"Transmutation",search:["transmutation"]},other:{name:"Other",search:function(e){return!["transmutation","conjuration","evocation","enchantment","abjuration","necromancy","divination","illusion"].includes(e.school)}}})},O9me:function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("ijqF"),controller:["$log",function(e){e.debug("PageFooterController create"),this.$onInit=function(){e.debug("PageFooterController init ")}}],bindings:{}};n.default=a},OxMV:function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("T8ru"),controller:["$log","$state","spellbookService","CLASSES",function(e,n,l,a){e.debug("CharactersController create");var t=this;t.$onInit=function(){e.debug("CharactersController init"),t.classes=Object.assign({},a),delete t.classes.all,t.prepared=!1,t.spellbook=!1,t.isNameExists=!1},t.add=function(){var e={name:t.name,prepared:t.prepared,spellbook:t.spellbook,class:t.classSelected};l.addCharacter(e),l.selectCharacter(e),e.prepared?n.go("spellbook.prepared"):n.go("spellbook.known")},t.goBack=function(){n.go("spellbook.characters")},t.checkIfNameExists=function(){t.isNameExists=l.isNameExists(t.name)}}]};n.default=a},QFgh:function(e,n,l){"use strict";angular.module("app.filters",[]),l("xODW")},T8ru:function(e,n){e.exports='<form name="addCharacterForm" ng-submit="$ctrl.add()">\n  <div class="form-group label-floating bmd-form-group" ng-class="{\'has-danger\': addCharacterForm.name.$dirty && (!$ctrl.name || $ctrl.isNameExists), \'has-success\': addCharacterForm.name.$dirty && $ctrl.name && !$ctrl.isNameExists}">\n    <label class="control-label bmd-label-static" for="classSelect">Name</label>\n    <input id=\'name\' name="name" type="text" ng-model=\'$ctrl.name\' ng-change=\'$ctrl.checkIfNameExists()\' class="form-control">\n    <span class="form-control-feedback">\n      <i class="material-icons" ng-if="addCharacterForm.name.$dirty && (!$ctrl.name || $ctrl.isNameExists)">clear</i>\n      <i class="material-icons" ng-if="addCharacterForm.name.$dirty && $ctrl.name && !$ctrl.isNameExists">done</i>\n    </span>\n    <label id="name-empy-error" ng-class="{\'error\': addCharacterForm.name.$dirty}" ng-if=\'!$ctrl.name\' for="name">This field is required.</label>\n    <label id="name-double-error" ng-if="$ctrl.isNameExists" class="error" for="name">Character with this name already exists.</label>\n  </div>\n  <div class="form-group">\n    <div class="form-check form-check-radio">\n      <label class="form-check-label text-dark">\n        <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" ng-model="$ctrl.prepared" ng-value="false">\n        Spontaneous casting\n        <span class="circle">\n          <span class="check"></span>\n        </span>\n      </label>\n    </div>\n    <div class="form-check form-check-radio">\n      <label class="form-check-label text-dark">\n        <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" ng-model="$ctrl.prepared" ng-value="true">\n        Prepared casting\n        <span class="circle">\n          <span class="check"></span>\n        </span>\n      </label>\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="form-check">\n      <label class="form-check-label text-dark">\n        <input class="form-check-input" type="checkbox" ng-model="$ctrl.spellbook">\n        Include spellbook (witch\'s familiar, etc)\n        <span class="form-check-sign">\n          <span class="check"></span>\n        </span>\n      </label>\n    </div>\n  </div>\n  <div class="form-group label-floating bmd-form-group">\n    <label class="control-label bmd-label-static" for="classSelect">Class</label>\n    <select class="form-control" name="classSelect" id="classSelect" ng-model="$ctrl.classSelected">\n      <option ng-repeat="(key, value) in $ctrl.classes" value="{{key}}">{{value.name}}</option>\n    </select>\n    <label id="name-empy-error" ng-class="{\'error\': addCharacterForm.classSelect.$dirty}" ng-if=\'!$ctrl.classSelected\' for="classSelect">This field is required.</label>\n  </div>\n  <div class="form-group">\n    \x3c!-- ng-disabled="addPcForm.$invalid" --\x3e\n    <button type="submit" class="btn btn-primary" ng-disabled=\'!$ctrl.classSelected || !$ctrl.name || $ctrl.isNameExists\'>Add</button>\n    <button type="button" class="btn btn-danger" ng-click="$ctrl.goBack()">Cancel</button>\n  </div>\n</form>\n'},TBcf:function(e,n,l){"use strict";var a=l("kTu0");angular.module("app.services").factory("spellService",["$log","$window","filterService","CLASSES",function(e,n,l,t){var s={};n.localStorage;return s.currentSpells=[],s.classSet=[],s.getAllSpells=function(){return s.currentSpells},s.getSpellsSplited=function(){console.time("SpellService.getSpellsSplited");var e=s.currentSpells.filter(l.filter),n={};return e.forEach(function(e){var l=e.levels.reduce(function(e,n){var l=n.substring(0,n.length-2);if(!t[s.classSet].search||t[s.classSet].search.reduce(function(e,n){return e||l.startsWith(n)},!1)){var a=n.substring(n.length-1);if(!e||a<e)return a}return e},void 0);l&&(n[l]||(n[l]=[]),n[l].push(e))}),console.timeEnd("SpellService.getSpellsSplited"),n},s.setClass=function(e){console.time("SpellService.setClass"),s.classSet=e,s.currentSpells=a.filter(function(n){return!!n.levels&&n.levels.reduce(function(n,l){var a=l.substring(0,l.length-2),s=!t[e].search||t[e].search.reduce(function(e,n){return e||a.startsWith(n)},!1);return n||s},!1)}),console.timeEnd("SpellService.setClass")},s.getSpellByUrl=function(e){return a.find(function(n){return s.spellNameToUrl(n.name)==e})},s.spellNameToUrl=function(e){return e.toLowerCase().trim().replace(/[.*+?^$ ,{}()|[\]\\\/]/g,"-").replace(/[’]/g,"_")},s.getSpellsCountByFilter=function(){return a.filter(l.filter).length},s}])},TtU3:function(e,n,l){e.exports=l.p+"29c29b1671ae5a81d788b944e8611181.png"},VOV6:function(e,n){e.exports='\x3c!-- <spell spell="$ctrl.spell"></spell> --\x3e\n<div class="card">\n  <div class="card-header card-header-primary">\n    \x3c!-- colors: "header-primary", "header-info", "header-success", "header-warning", "header-danger" --\x3e\n    <div class="nav-tabs-navigation">\n      <div class="nav-tabs-wrapper">\n        <ul class="nav nav-tabs" data-tabs="tabs">\n          <li class="nav-item">\n            <a class="nav-link" ui-sref="spellbook.characters" ui-sref-active="active">\n              <i class="fas fa-user"></i>Characters\n              <div class="ripple-container"></div>\n            </a>\n          </li>\n          <li class="nav-item" ng-if="$ctrl.selectedCharacter() && $ctrl.selectedCharacter().prepared">\n            <a class="nav-link" ui-sref="spellbook.prepared" ui-sref-active="active">\n              <i class="fas fa-scroll"></i> Spells Prepared\n              <div class="ripple-container"></div>\n            </a>\n          </li>\n          <li class="nav-item" ng-if="$ctrl.selectedCharacter() && !$ctrl.selectedCharacter().prepared">\n            <a class="nav-link" ui-sref="spellbook.known" ui-sref-active="active">\n              <i class="fas fa-scroll"></i> Spells Known\n              <div class="ripple-container"></div>\n            </a>\n          </li>\n          <li class="nav-item" ng-if="$ctrl.selectedCharacter() && $ctrl.selectedCharacter().spellbook">\n            <a class="nav-link" ui-sref="spellbook.book" ui-sref-active="active">\n              <i class="fas fa-book"></i> Spellbook\n              <div class="ripple-container"></div>\n            </a>\n          </li>\n          <li class="nav-item" ng-if="$ctrl.selectedCharacter()">\n            <a class="nav-link" ui-sref="spellbook.list" ui-sref-active="active">\n              <i class="fas fa-hat-wizard"></i> Spell List\n              <div class="ripple-container"></div>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n\n  <div class="card-body">\n    <ui-view></ui-view>\n  </div>\n  <div class="card-footer">\n  </div>\n</div>\n'},"W/SU":function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("6LOo"),controller:["$log","$state","$scope","notificationService","filterService","spellService","spellbookService","CLASSES",function(e,n,l,a,t,s,r,o){e.debug("SpellbookSpellListController create");var c=this;function i(){c.otherSpellsCount=0;var e=s.getSpellsSplited();return c.total=Object.entries(e).reduce(function(e,n){return e+n[1].length},0),c.total||(c.otherSpellsCount=s.getSpellsCountByFilter()),e}c.$onInit=function(){e.debug("SpellbookSpellListController init"),c.classes=o,c.classSelected=r.selectedCharacter.class,c.setClass(),a.subscribe(l,a.FILTER_CHANGED,function(e,n){c.spells=i()})},c.search=function(){e.debug("SpellbookSpellListController ctrl.search",c.filter),c.spells=i()},c.setClass=function(){s.setClass(c.classSelected),c.search()},c.classToAll=function(){c.classSelected="all",c.setClass()},c.addToBook=function(e){r.selectedCharacter.book||(r.selectedCharacter.book={});var n=e.levels.find(function(e){return e.startsWith(c.classSelected)});n=n.substring(n.length-1),r.selectedCharacter.book[n]||(r.selectedCharacter.book[n]=[]),r.selectedCharacter.book[n].push(e.name),r.saveCharacters()}}],bindings:{spells:"<",className:"<"}};n.default=a},WhGt:function(e,n){e.exports='<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="false">\n  <div class="modal-dialog modal-lg" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h3 class="modal-title" id="exampleModalLabel">{{$root.spell.name}}</h3>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span class="fas fa-times"></span>\n        </button>\n      </div>\n      <div class="modal-body">\n        <div>\n          <div class="spell-description">\n            <p><b>School </b> {{$root.spell.school}}<span ng-if="$root.spell.subschool"> ({{$root.spell.subschool}})</span><span ng-if="$root.spell.descripters.length"> [{{$root.spell.descripters | array}}]</span>;\n              <b>Level </b><span>{{$root.spell.levels | array}}</span></p>\n            <p><b>Casting Time </b> {{$root.spell.castingTime}}</p>\n            <p><b>Components </b> {{$root.spell.components | array}}</p>\n            <p><span ng-if="$root.spell.range"><b>Range </b>{{$root.spell.range}}</span></p>\n            <p><span ng-if="$root.spell.area"><b>Area </b>{{$root.spell.area}}</span></p>\n            <p><span ng-if="$root.spell.target"><b>Target </b>{{$root.spell.target}}</span></p>\n            <p><span ng-if="$root.spell.targets"><b>Targets </b>{{$root.spell.targets}}</span></p>\n            <p><span ng-if="$root.spell.effect"><b>Effect </b>{{$root.spell.effect}}</span></p>\n            <p><span ng-if="$root.spell.duration"><b>Duration </b>{{$root.spell.duration}}</span></p>\n            <p><span ng-if="$root.spell.savingThrow"><b>Saving Throw </b>{{$root.spell.savingThrow}}; <b>Spell Resistance </b>{{$root.spell.spellResistance}}</span></p>\n          </div>\n          \x3c!-- <p ng-repeat="paragraph in $root.spell.description.split(\'\\n\') track by $index">{{paragraph}}</p> --\x3e\n          <ng-bind-html ng-bind-html="$root.spellDescription"></ng-bind-html>\n        </div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n'},YCLP:function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("VOV6"),controller:["$log","spellbookService",function(e,n){e.debug("SpellbookController create"),this.$onInit=function(){e.debug("SpellbookController init")},this.selectedCharacter=function(){return n.selectedCharacter}}]};n.default=a},Z5a8:function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("Zrka"),controller:["$log","$state","$scope","notificationService","filterService","spellService","spellbookService","CLASSES",function(e,n,l,a,t,s,r,o){e.debug("SpellController create");var c=this;c.$onInit=function(){e.debug("AppController init"),r.selectedCharacter&&(c.book=r.selectedCharacter.book)},c.chooseSpell=function(e){var l=s.spellNameToUrl(e);n.go("spells",{spellUrl:l})},c.delete=function(n,l){e.debug("SpellbookBookController ctrl.delete",n,l),r.selectedCharacter.book[n].splice(l,1),r.saveCharacters()}}],bindings:{spells:"<",className:"<"}};n.default=a},Zrka:function(e,n){e.exports='<div class="accordion" id="accordionExample">\n  <div ng-repeat="(key, value) in $ctrl.book" class="card card-collapse">\n    <div class="card-header" role="tab" id="heading{{$index}}" data-toggle="collapse" href="#collapse{{$index}}" aria-expanded="false" aria-controls="collapse{{$index}}">\n      <h5 class="mb-0 text-primary">\n        <a >\n          Level {{key}}\n          <i class="float-right fas fa-chevron-down expanded-flip"></i>\n          <div><small class=\'text-muted\'>count {{value.length}}</small></div>\n        </a>\n      </h5>\n    </div>\n\n    <div id="collapse{{$index}}" class="collapse" role="tabpanel" aria-labelledby="heading{{$index}}" data-parent="#accordionExample">\n      <div class="card-body">\n        <table class="table table-sm">\n          <tbody>\n            <tr ng-repeat="spell in value | orderBy:\'toString()\'">\n              <td ng-click="$ctrl.chooseSpell(spell)">\n                <a href="#" class="text-dark">\n                  {{spell}}\n                </a>\n                \x3c!-- <div><small class="text-info">{{spell.duration}}</small>; <small class="text-info">{{spell.savingThrow}}</small></div> --\x3e\n              </td>\n              <td class="float-right">\n                <button type="button" rel="tooltip" title="" class="btn btn-primary btn-link btn-sm" ng-click="$ctrl.delete(key, $index)">\n                  <i class="fas fa-lg fa-trash text-danger"></i>\n                  <div class="ripple-container"></div>\n                </button>\n              </td>\n              <td class="float-right">\n                <button type="button" rel="tooltip" title="" class="btn btn-primary btn-link btn-sm" ng-click="$asd(spell)">\n                  <i class="fas fa-lg fa-scroll text-warning"></i>\n                  <div class="ripple-container"></div>\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n<button ng-if="$ctrl.otherSpellsCount" ng-click="$ctrl.classToAll()" class=\'btn btn-warning\'>Found <strong>{{$ctrl.otherSpellsCount}}</strong> spell{{$ctrl.otherSpellsCount!=1?\'s\':\'\'}} in other classes</button>\n\x3c!-- <ui-view></ui-view> --\x3e\n'},ejG7:function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("sEuc"),controller:["$log","$state","filterService","spellService","CLASSES",function(e,n,l,a,t){e.debug("SpellController create");var s=this;s.$onInit=function(){e.debug("PreparedController init"),s.spells={level:{},day:{}}},s.chooseSpell=function(e){s.spell=e;var l=a.spellNameToUrl(s.spell.name);n.go("spells",{spellUrl:l})},s.isFav=function(e){return l.isFav(e)},s.changeFav=function(e){l.changeFav(e)}}],bindings:{spells:"<",className:"<"}};n.default=a},f1Ss:function(e,n){e.exports='<div class="flextable table-actions">\n  <div class="flextable-item ">\n    <form ng-submit="$ctrl.search()">\n      <div class="form-row">\n        <div class="col">\n          <input type="text" class="form-control input-block" placeholder="Search" ng-change="$ctrl.search()" ng-model="$ctrl.filter">\n        </div>\n        <div class="col-auto">\n          <div class="form-check">\n            <label class="form-check-label text-info">\n              <input class="form-check-input" type="checkbox" ng-change="$ctrl.setFavOnly()" ng-model="$ctrl.favOnly">\n              <span class="form-check-sign">\n                <span class="check"></span>\n              </span>\n              Favorites Only\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class="form-row">\n        <div class="col-auto">\n          <a href="#" class="collapsed" data-toggle="collapse" data-target="#moreFilters" aria-expanded="false">\n            More filters\n            <span ng-if="$ctrl.filters.length">\n              ({{$ctrl.filters | array}})\n            </span>\n          </a>\n        </div>\n      </div>\n      <div class="collapse" id="moreFilters" style="">\n        <div class="form-row">\n          <div class="col col-centered ">\n            <select class="form-control" ng-change="$ctrl.setSchool()" name="schoolSelect" id="schoolSelect" ng-model="$ctrl.schoolSelected">\n              <option ng-repeat="(key, value) in $ctrl.schools" value="{{key}}">{{value.name}}</option>\n            </select>\n          </div>\n        </div>\n      </div>\n      <div class="form-row">\n        <div class="col">\n          <button class="btn btn-sm" ng-click="$ctrl.reset()">Reset</button>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n'},iDBG:function(e,n,l){e.exports='<nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">\n  <div class="container-fluid">\n    <div class="navbar-wrapper">\n      <a ui-sref="main"><img src="'+l("TtU3")+'" style="width: 72px;" class="img-fluid float-left" alt="Responsive image"></a>\n      <h2 class="text-light ml-3 align-top">\n        <span>{{$ctrl.title}}</span>\n      </h2>\n      <h6 class="text-primary ml-3 align-top" ng-if="$ctrl.subtitle">\n        <span>{{$ctrl.subtitle}}</span>\n      </h6>\n    </div>\n  </div>\n</nav>\n'},ijqF:function(e,n){e.exports='<footer class="footer">\n  <div class="container-fluid">\n    <div class="row">\n      <div class="col-md">\n        <nav class="float-md-left">\n          <ul>\n            <li>\n              <a href="https://github.com/owlbeardm/scrollbear">\n                GitHub\n              </a>\n            </li>\n            <li>\n              <a href="mailto:owlbeardm@gmail.com?subject=Scrollbear: ">Email ME</a>\n            </li>\n            <li>\n              <a href="https://c7d5a6.com/">\n                CONTACTS\n              </a>\n            </li>\n            <li>\n              <a ui-sref="spellbook.characters">\n                spellbook\n              </a>\n            </li>\n          </ul>\n        </nav>\n      </div>\n      <div class="col-md">\n        <div class="copyright float-md-right">\n          2018-2019 by <a href="https://owlbeardm.com/" target="_blank">OwlbearDM</a>\n        </div>\n      </div>\n    </div>\n  </div>\n</footer>\n'},lLAa:function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("iDBG"),controller:["$log",function(e){e.debug("PageHeaderController create");var n=this;n.$onInit=function(){e.debug("PageHeaderController init ",n.title,n.breadcrumbItems),n.titleValues=n.titleValues||{},n.subtitleValues=n.subtitleValues||{}}}],bindings:{title:"@",subtitle:"@?"}};n.default=a},lLoU:function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={template:l("vaH9"),controller:["$log","$state","filterService","spellService","CLASSES",function(e,n,l,a,t){e.debug("SpellController create");var s=this;s.$onInit=function(){e.debug("SpellListController init"),s.classesC=t},s.chooseSpell=function(e){s.spell=e;var l=a.spellNameToUrl(s.spell.name);n.go("spells",{spellUrl:l})},s.isFav=function(e){return l.isFav(e)},s.changeFav=function(e){l.changeFav(e)}}],bindings:{spells:"<",className:"<"}};n.default=a},lq7A:function(e,n){e.exports="<div ng-if='!$ctrl.characters.length' class=\"alert alert-info\" role=\"alert\">\n  There are no characters!\n</div>\n<div class=\"list-group characters\">\n  <div class='row' ng-repeat=\"character in $ctrl.characters track by $index\">\n    <div class='col'>\n      <a ng-click=\"$ctrl.selectCharacter(character)\" class=\"list-group-item list-group-item-action btn\" ng-class=\"{'btn-primary': $ctrl.characterSelected() == $index, 'btn-secondary': $ctrl.characterSelected() != $index}\">\n        <div class='row'>\n          <div class='col'>\n            <span>{{character.name}}</span>\n            <br><span class='text-dark'><small>{{$ctrl.classes[character.class].name}}</small></span>\n          </div>\n          <div class='col'>\n            <i class=\"fas fa-lg fa-chevron-right float-right mt-2\"></i>\n          </div>\n        </div>\n      </a>\n    </div>\n    <button class='btn btn-sm btn-danger float-right mt-2' ng-click=\"$ctrl.delete($index)\"><i class=\"fas fa-trash\"></i></button>\n  </div>\n</div>\n<button class='btn btn-success' ng-click=\"$ctrl.add()\">Add new character</button>\n"},lwo9:function(e,n){e.exports='<div class="wrapper">\n  <div class="main-panel">\n    <pageheader title="ScrollBear" subtitle="Handy Spellbook"></pageheader>\n\n    <div class="content">\n      <div class="row">\n        <div class="col-xl-8 col-centered">\n          <ui-view></ui-view>\n        </div>\n      </div>\n    </div>\n\n    <pagefooter></pagefooter>\n  </div>\n</div>\n\n<spell></spell>\n'},sEuc:function(e,n){e.exports='<div class="accordion" id="accordionExample">\n  <div ng-repeat="(key, value) in $ctrl.spells" class="card card-collapse">\n    <div class="card-header" role="tab" id="heading{{$index}}" data-toggle="collapse" href="#collapse{{$index}}" aria-expanded="false" aria-controls="collapse{{$index}}">\n      <h5 class="mb-0 text-primary">\n        <a >\n          {{$ctrl.classesC[$ctrl.className].name}} {{key}}\n          <i class="float-right fas fa-chevron-down expanded-flip"></i>\n          <div><small class=\'text-muted\'>count {{value.length}}</small></div>\n        </a>\n      </h5>\n    </div>\n\n    <div id="collapse{{$index}}" class="collapse" role="tabpanel" aria-labelledby="heading{{$index}}" data-parent="#accordionExample">\n      <div class="card-body">\n        <table class="table table-sm">\n          <tbody>\n            <tr ng-repeat="spell in value track by $index">\n              <td ng-click="$ctrl.chooseSpell(spell)">\n                <a href="#" class="text-dark">\n                  {{spell.name}}\n                </a>\n                \x3c!-- <div><small class="text-info">{{spell.duration}}</small>; <small class="text-info">{{spell.savingThrow}}</small></div> --\x3e\n              </td>\n              <td class="float-right">\n                <button type="button" rel="tooltip" title="" class="btn btn-primary btn-link btn-sm" ng-click="$ctrl.changeFav(spell)">\n                  <i class="fa-lg fa-star" ng-class="{\'fas text-primary\': $ctrl.isFav(spell), \'far text-muted\': !$ctrl.isFav(spell)}"></i>\n                  <div class="ripple-container"></div>\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n'},vNZY:function(e,n,l){"use strict";angular.module("app.services").factory("filterService",["$log","$window","CLASSES","SCHOOLS",function(e,n,l,a){var t={},s=n.localStorage;return t.school="any",t.favOnly=!!JSON.parse(s.getItem("FAV_ONLY"))&&JSON.parse(s.getItem("FAV_ONLY")),t.setFavOnly=function(e){t.favOnly=e,s.setItem("FAV_ONLY",JSON.stringify(t.favOnly))},t.filter=function(e){var n=!1;return(n=!t.filterText||e.name.toUpperCase().includes(t.filterText.toUpperCase()))&&t.favOnly&&(n=n&&t.isFav(e)),n&&(n=Array.isArray(a[t.school].search)?n&&a[t.school].search.includes(e.school):n&&a[t.school].search(e)),n},t.isFav=function(e){var n=JSON.parse(s.getItem("FAV_SPELLS"));return n&&n.length||(n=[]),n.includes(e.name)},t.changeFav=function(e){var n=JSON.parse(s.getItem("FAV_SPELLS"));n&&n.length||(n=[]),n.includes(e.name)?n.splice(n.indexOf(e.name),1):n.push(e.name),s.setItem("FAV_SPELLS",JSON.stringify(n))},t}])},vaH9:function(e,n){e.exports='<div class="accordion" id="accordionExample">\n  <div ng-repeat="(key, value) in $ctrl.spells" class="card card-collapse">\n    <div class="card-header" role="tab" id="heading{{$index}}" data-toggle="collapse" href="#collapse{{$index}}" aria-expanded="false" aria-controls="collapse{{$index}}">\n      <h5 class="mb-0 text-primary">\n        <a >\n          {{$ctrl.classesC[$ctrl.className].name}} {{key}}\n          <i class="float-right fas fa-chevron-down expanded-flip"></i>\n          <div><small class=\'text-muted\'>count {{value.length}}</small></div>\n        </a>\n      </h5>\n    </div>\n\n    <div id="collapse{{$index}}" class="collapse" role="tabpanel" aria-labelledby="heading{{$index}}" data-parent="#accordionExample">\n      <div class="card-body">\n        <table class="table table-sm">\n          <tbody>\n            <tr ng-repeat="spell in value track by $index">\n              <td ng-click="$ctrl.chooseSpell(spell)">\n                <a href="#" class="text-dark">\n                  {{spell.name}}\n                </a>\n                \x3c!-- <div><small class="text-info">{{spell.duration}}</small>; <small class="text-info">{{spell.savingThrow}}</small></div> --\x3e\n              </td>\n              <td class="float-right">\n                <button type="button" rel="tooltip" title="" class="btn btn-primary btn-link btn-sm" ng-click="$ctrl.changeFav(spell)">\n                  <i class="fa-lg fa-star" ng-class="{\'fas text-primary\': $ctrl.isFav(spell), \'far text-muted\': !$ctrl.isFav(spell)}"></i>\n                  <div class="ripple-container"></div>\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n'},xODW:function(e,n,l){"use strict";angular.module("app.filters").filter("array",["$log",function(e){return function(e){return e?Array.isArray(e)?e.reduce(function(e,n,l){return e+(0==l?"":", ")+n},""):e:""}}])}});