!function(e){function l(l){for(var n,s,c=l[0],o=l[1],i=l[2],p=0,u=[];p<c.length;p++)s=c[p],a[s]&&u.push(a[s][0]),a[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(d&&d(l);u.length;)u.shift()();return r.push.apply(r,i||[]),t()}function t(){for(var e,l=0;l<r.length;l++){for(var t=r[l],n=!0,c=1;c<t.length;c++){var o=t[c];0!==a[o]&&(n=!1)}n&&(r.splice(l--,1),e=s(s.s=t[0]))}return e}var n={},a={0:0},r=[];function s(l){if(n[l])return n[l].exports;var t=n[l]={i:l,l:!1,exports:{}};return e[l].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=e,s.c=n,s.d=function(e,l,t){s.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:t})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,l){if(1&l&&(e=s(e)),8&l)return e;if(4&l&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&l&&"string"!=typeof e)for(var n in e)s.d(t,n,function(l){return e[l]}.bind(null,n));return t},s.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(l,"a",l),l},s.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},s.p="";var c=window.webpackJsonp=window.webpackJsonp||[],o=c.push.bind(c);c.push=l,c=c.slice();for(var i=0;i<c.length;i++)l(c[i]);var d=o;r.push(["Ha7V",6,7,13,8,9,4,5,10,11,12,3,1,2]),t()}({"/WX3":function(e,l){e.exports="<div class='row'>\n  <div class='col'>\n    <a ng-click=\"$ctrl.selectCharacter($ctrl.character)\" class=\"list-group-item list-group-item-action btn\" ng-class=\"{'btn-primary': $ctrl.selected, 'btn-secondary': !$ctrl.selected}\">\n      <div class='row'>\n        <div class='col'>\n          <span>{{$ctrl.character.name}}</span>\n          <br><span class='text-dark'><small>{{$ctrl.classes[$ctrl.character.class].name}}</small></span>\n        </div>\n        <div class='col'>\n          <i class=\"fas fa-lg fa-chevron-right float-right mt-2\"></i>\n        </div>\n      </div>\n    </a>\n  </div>\n  <div class='col-auto'>\n  <button ng-if=\"$ctrl.deleteMode\" class='btn btn btn-danger mt-2' ng-click=\"$ctrl.delete()\">confirm <i class=\"fas fa-trash  ml-1\"></i></button>\n  <button ng-if=\"$ctrl.deleteMode\" class='btn btn mt-2 ml-1' ng-click=\"$ctrl.cancelDelete()\">cancel</button>\n  <button ng-if=\"!$ctrl.deleteMode\" class='btn btn btn-danger mt-2' ng-click=\"$ctrl.startDelete()\"><i class=\"fas fa-trash\"></i></button>\n  </div>\n</div>\n"},"/w8e":function(e,l){e.exports='<div class="flextable table-actions">\n  <div class="flextable-item ">\n    <form ng-submit="$ctrl.search()">\n      <div class="form-row">\n        <div class="col">\n          <input type="text" class="form-control input-block" placeholder="Search" ng-change="$ctrl.search()" ng-model="$ctrl.filter">\n        </div>\n        <div class="col-auto">\n          <div class="form-check">\n            <label class="form-check-label text-info">\n              <input class="form-check-input" type="checkbox" ng-change="$ctrl.setFavOnly()" ng-model="$ctrl.favOnly">\n              <span class="form-check-sign">\n                <span class="check"></span>\n              </span>\n              Favorites Only\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class="form-row">\n        <div class="col-auto">\n          <a href="#" class="collapsed" data-toggle="collapse" data-target="#moreFilters" aria-expanded="false">\n            More filters\n            <span ng-if="$ctrl.filters.length">\n              ({{$ctrl.filters | array}})\n            </span>\n          </a>\n        </div>\n      </div>\n      <div class="collapse" id="moreFilters" style="">\n        <div class="form-row">\n          <div class="col col-centered ">\n            <select class="form-control" ng-change="$ctrl.setSchool()" name="schoolSelect" id="schoolSelect" ng-model="$ctrl.schoolSelected">\n              <option ng-repeat="(key, value) in $ctrl.schools" value="{{key}}">{{value.name}}</option>\n            </select>\n          </div>\n        </div>\n      </div>\n      <div class="form-row">\n        <div class="col">\n          <button class="btn btn-sm" ng-click="$ctrl.reset()">Reset</button>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n'},"0Pgu":function(e,l,t){"use strict";var n=f(t("4o4e")),a=f(t("KNhS")),r=f(t("qSSA")),s=f(t("6phJ")),c=f(t("hzYb")),o=f(t("Ly/k")),i=f(t("xt/U")),d=f(t("paWR")),p=f(t("Zrls")),u=f(t("9I0W"));function f(e){return e&&e.__esModule?e:{default:e}}var v=angular.module("pages.components",[]);v.component("spellbook",n.default),v.component("characters",a.default),v.component("newcharacter",r.default),v.component("prepared",s.default),v.component("known",c.default),v.component("spellbookSpelllist",o.default),v.component("spellbookBook",i.default),v.component("main",d.default),v.component("license",p.default),v.component("spell",u.default)},"0Vjt":function(e,l){e.exports='<div class="accordion" id="accordionExample">\n  <div ng-repeat="(key, value) in $ctrl.spells" class="card card-collapse">\n    <div class="card-header" role="tab" id="heading{{$index}}" data-toggle="collapse" href="#collapse{{$index}}" aria-expanded="false" aria-controls="collapse{{$index}}" ng-click="$ctrl.click($index)">\n      <h5 class="mb-0 text-primary">\n        <a>\n          {{$ctrl.classesC[$ctrl.className].name}} {{key}}\n          <i class="float-right fas fa-chevron-down expanded-flip"></i>\n          <div><small class=\'text-muted\'>count {{value.length}}</small></div>\n        </a>\n      </h5>\n    </div>\n\n    <div id="collapse{{$index}}" class="collapse" role="tabpanel" aria-labelledby="heading{{$index}}" data-parent="#accordionExample">\n      <div class="card-body">\n        <spell-list-light spells="value" collapse-name="\'collapse\'+$index"></spell-list-light>\n      </div>\n    </div>\n  </div>\n</div>\n'},"0fGQ":function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("gNSh"),controller:["$log","$state","$scope","$rootScope","$timeout","filterService","spellService","spellbookService","$window","$document","CLASSES",function(e,l,t,n,a,r,s,c,o,i,d){e.debug("SpellbookSpelllistLightController create");var p=this;p.$onInit=function(){e.debug("SpellbookSpelllistLightController init"),p.prepared=c.selectedCharacter.prepared,p.spellbook=c.selectedCharacter.spellbook,angular.element(o).bind("scroll",function(){p.redraw()}),angular.element(o).bind("resize",function(){p.redraw()}),e.debug(angular.element("#"+p.collapseName))},p.$doCheck=function(){if(p.collapse=angular.element("#"+p.collapseName),p.collapse.attr("class")){if(p.classes=p.collapse.attr("class").split(" "),p.scroll=i.scrollTop(),p.offsetTop=angular.element("#list-new-"+p.collapseName).offset(),p.offsetTop&&p.scroll>p.offsetTop.top+40*p.spells.length)return;if(p.elementHeight=40*p.spells.length,p.height=o.innerHeight,p.offsetTop){if(p.scroll>p.offsetTop.top+40*p.spells)return;var e=p.height/40+2,l=Math.min(Math.max(0,Math.floor((p.scroll-p.offsetTop.top)/40)),p.spells.length);e==p.elements&&l==p.start||(p.start=l,p.elements=e,p.spellsL=p.spells.slice(p.start,p.start+p.elements))}}},p.redraw=function(){p.$doCheck(),t.$digest()},p.chooseSpell=function(e){s.showSpell(e.name)},p.isFav=function(e){return r.isFav(e)},p.changeFav=function(e){r.changeFav(e)},p.isInSpellBook=function(e){return!!c.selectedCharacter.book&&Object.entries(c.selectedCharacter.book).reduce(function(l,t){return l||t[1].reduce(function(l,t){return l||t==e},!1)},!1)},p.isSpellPrepared=function(e){if(c.selectedCharacter.prepared){if(c.selectedCharacter.preparedSpells)return Object.entries(c.selectedCharacter.preparedSpells).reduce(function(l,t){return l+t[1].spells.reduce(function(l,t){return l+(t.name==e?1:0)},0)},0)}else if(c.selectedCharacter.knownSpells)return Object.entries(c.selectedCharacter.knownSpells).reduce(function(l,t){return l||t[1].spells.reduce(function(l,t){return l||t==e},!1)},!1);return!1},p.addToBook=function(e,l){c.selectedCharacter.book||(c.selectedCharacter.book={}),console.log(l.levels);var t=l.levels.reduce(function(e,l){if(d[p.classSelected].search.reduce(function(e,t){return e||l.startsWith(t)},!1)){var t=l.substring(l.length-1);if(!e||e>t)return t}return e},void 0);null==t&&(t=e),c.selectedCharacter.book[t]||(c.selectedCharacter.book[t]=[]),c.selectedCharacter.book[t].push(l.name),c.saveCharacters()},p.addSpell=function(e,l){var t=l.levels.reduce(function(e,l){if(d[p.classSelected].search.reduce(function(e,t){return e||l.startsWith(t)},!1)){var t=l.substring(l.length-1);if(!e||e>t)return t}return e},void 0);null==t&&(t=e),c.selectedCharacter.prepared?(c.selectedCharacter.preparedSpells||(c.selectedCharacter.preparedSpells={}),c.selectedCharacter.preparedSpells[t]||(c.selectedCharacter.preparedSpells[t]={spells:[]}),c.selectedCharacter.preparedSpells[t].spells.push({name:l.name})):(c.selectedCharacter.knownSpells||(c.selectedCharacter.knownSpells={}),c.selectedCharacter.knownSpells[t]||(c.selectedCharacter.knownSpells[t]={spells:[]}),c.selectedCharacter.knownSpells[t].spells.push(l.name)),c.saveCharacters(),console.log(c.selectedCharacter)}}],bindings:{spells:"<",collapseName:"<",classSelected:"<"}};l.default=n},"2NJH":function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("hAGq"),controller:["$log","$state","filterService","focusService","spellService","spellbookService","CLASSES",function(e,l,t,n,a,r,s){e.debug("KnownSpelLevelController create");var c=this;c.$onInit=function(){e.debug("KnownSpelLevelController init")},c.cast=function(e){r.selectedCharacter.knownSpells[e].cast++,r.saveCharacters()},c.delete=function(l,t){e.debug("SpellbookBookController ctrl.delete",l,t),r.selectedCharacter.knownSpells[l].spells.splice(t,1),r.saveCharacters()},c.edit=function(){c.perDay=c.spellLevel.perDay,c.known=c.spellLevel.known,c.editMode=!0,n.setFocus("known")},c.saveEdit=function(){c.spellLevel.perDay=c.perDay,c.spellLevel.known=c.known,c.editMode=!1,r.saveCharacters()},c.cancelEdit=function(){c.editMode=!1},c.chooseSpell=function(e){a.showSpell(e)}}],bindings:{spellLevel:"<",level:"<",index:"<"}};l.default=n},"3GSd":function(e,l){e.exports='<footer class="footer">\n  <div class="container-fluid">\n    <div class="row">\n      <div class="col-md">\n        <nav class="float-md-left">\n          <ul>\n            <li>\n              <a href="https://github.com/owlbeardm/scrollbear">\n                GitHub\n              </a>\n            </li>\n            <li>\n              <a href="mailto:owlbeardm@gmail.com?subject=Scrollbear: ">Email ME</a>\n            </li>\n            <li>\n              <a href="https://c7d5a6.com/">\n                CONTACTS\n              </a>\n            </li>\n          </ul>\n        </nav>\n      </div>\n      <div class="col-md">\n        <div class="copyright float-md-right">\n          2018-2019 © Mikita Kukavenka, <a href="https://owlbeardm.com/" target="_blank">OwlbearDM</a><span ng-if="$ctrl.version">, {{$ctrl.version}}<span>\n        </div>\n      </div>\n    </div>\n  </div>\n</footer>\n'},"3v8e":function(e,l){e.exports='<filter></filter>\n<div class="accordion" id="accordionExample">\n  <div ng-repeat="(key, value) in $ctrl.spells" class="card card-collapse">\n    <div class="card-header" role="tab" id="heading{{$index}}" data-toggle="collapse" href="#collapse{{$index}}" aria-expanded="false" aria-controls="collapse{{$index}}" ng-click="$ctrl.click($index)">\n      <h5 class="mb-0 text-primary">\n        <a >\n          {{$ctrl.classes[$ctrl.classSelected].name}} {{key}}\n          <i class="float-right fas fa-chevron-down expanded-flip"></i>\n          <div><small class=\'text-muted\'>count {{value.length}}</small></div>\n        </a>\n      </h5>\n    </div>\n\n    <div id="collapse{{$index}}" class="collapse" role="tabpanel" aria-labelledby="heading{{$index}}" data-parent="#accordionExample">\n      <div class="card-body">\n        <spellbook-spelllist-light class-selected="$ctrl.classSelected" spells="value" collapse-name="\'collapse\'+$index"></spellbook-spelllist-light>\n      </div>\n    </div>\n  </div>\n</div>\n<button ng-if="$ctrl.otherSpellsCount" ng-click="$ctrl.classToAll()" class=\'btn btn-warning\'>Found <strong>{{$ctrl.otherSpellsCount}}</strong> spell{{$ctrl.otherSpellsCount!=1?\'s\':\'\'}} in other classes</button>\n'},"47k+":function(e,l){e.exports='<div class="modal fade" id="modalSpell" tabindex="-1" role="dialog" aria-labelledby="modalSpellLabel" aria-hidden="false">\n  <div class="modal-dialog modal-lg" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <td class="float-right">\n        </td>\n        <h3 class="modal-title" id="modalSpellLabel">\n          <a href="#" class="mr-2" ng-click="$ctrl.changeFav()">\n            <i class="fa-star" ng-class="{\'fas text-primary\': $ctrl.isFav, \'far text-muted\': !$ctrl.isFav}"></i>\n            <div class="ripple-container"></div>\n          </a>\n          {{$root.spell.name}}\n        </h3>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span class="fas fa-times"></span>\n        </button>\n      </div>\n      <div class="modal-body">\n        <div>\n          <div class="spell-description">\n            <p><b>School </b> {{$root.spell.school}}<span ng-if="$root.spell.subschool"> ({{$root.spell.subschool}})</span><span ng-if="$root.spell.descripters.length"> [{{$root.spell.descripters | array}}]</span>;\n              <b>Level </b><span>{{$root.spell.levels | array}}</span></p>\n            <p><b>Casting Time </b> {{$root.spell.castingTime}}</p>\n            <p><b>Components </b> {{$root.spell.components | array}}</p>\n            <p><span ng-if="$root.spell.range"><b>Range </b>{{$root.spell.range}}</span></p>\n            <p><span ng-if="$root.spell.area"><b>Area </b>{{$root.spell.area}}</span></p>\n            <p><span ng-if="$root.spell.target"><b>Target </b>{{$root.spell.target}}</span></p>\n            <p><span ng-if="$root.spell.targets"><b>Targets </b>{{$root.spell.targets}}</span></p>\n            <p><span ng-if="$root.spell.effect"><b>Effect </b>{{$root.spell.effect}}</span></p>\n            <p><span ng-if="$root.spell.duration"><b>Duration </b>{{$root.spell.duration}}</span></p>\n            <p><span ng-if="$root.spell.savingThrow"><b>Saving Throw </b>{{$root.spell.savingThrow}}; <b>Spell Resistance </b>{{$root.spell.spellResistance}}</span></p>\n          </div>\n          \x3c!-- <p ng-repeat="paragraph in $root.spell.description.split(\'\\n\') track by $index">{{paragraph}}</p> --\x3e\n          <ng-bind-html ng-bind-html="$root.spellDescription"></ng-bind-html>\n          <div ng-if="$root.spellSource"><small><ng-bind-html ng-bind-html="$root.spellSource"></ng-bind-html></small></div>\n        </div>\n      </div>\n      <div class="modal-footer">\n\n        \x3c!-- <button type="button" class="btn btn-sm btn-primary" disabled data-dismiss="modal">Prepare</button> --\x3e\n        \x3c!-- <button type="button" class="btn btn-sm" data-dismiss="modal">Add to spellbook</button> --\x3e\n        <button type="button" class="btn" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n'},"4o4e":function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("HBlH"),controller:["$log","spellbookService",function(e,l){e.debug("SpellbookController create"),this.$onInit=function(){e.debug("SpellbookController init")},this.selectedCharacter=function(){return l.selectedCharacter}}]};l.default=n},"5sqb":function(e,l){e.exports='<div ng-if=\'!$ctrl.total\' class="alert alert-info" role="alert">\n  There are no spells known! You can add ones from <a ui-sref="spellbook.list" class="alert-link">spell list</a>.\n</div>\n\n<button ng-if=\'$ctrl.total\' ng-click="$ctrl.resetCast()" class=\'btn btn-primary mb-3 float-right mr-4\'>Reset cast</button>\n\n<div ng-if=\'$ctrl.total\' class="accordion" id="accordionExample">\n  <div ng-repeat="(key, value) in $ctrl.spells" class="card card-collapse">\n    <known-spell-level spell-level="value" level="key" index="$index"></known-spell-level>\n  </div>\n</div>\n'},"6n4l":function(e,l,t){"use strict";var n=m(t("8VTT")),a=m(t("2NJH")),r=m(t("vKWj")),s=m(t("W0le")),c=m(t("0fGQ")),o=m(t("9iD9")),i=m(t("G4BT")),d=m(t("uFKM")),p=m(t("Ih/f")),u=m(t("Abyr")),f=m(t("BfhM")),v=m(t("Muoi"));function m(e){return e&&e.__esModule?e:{default:e}}var g=angular.module("app.components",[]);g.component("characterItem",n.default),g.component("knownSpellLevel",a.default),g.component("modalSpell",r.default),g.component("preparedSpellLevel",s.default),g.component("spellbookSpelllistLight",c.default),g.component("spellList",o.default),g.component("spellListLight",i.default),g.component("pageHeader",d.default),g.component("pageFooter",p.default),g.component("filter",u.default),g.component("sidebarToggle",f.default),g.component("sidebar",v.default)},"6phJ":function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("g+cT"),controller:["$log","$state","filterService","spellService","spellbookService","CLASSES",function(e,l,t,n,a,r){e.debug("SpellController create");var s=this;s.$onInit=function(){e.debug("PreparedController init"),a.selectedCharacter?(a.selectedCharacter.preparedSpells||(a.selectedCharacter.preparedSpells={}),s.spells=a.selectedCharacter.preparedSpells,Object.entries(s.spells).forEach(function(e){e[1].spells||(e[1].spells=[]),e[1].cast||(e[1].cast=0),e[1].perDay||(e[1].perDay=0),e[1].known||(e[1].known=0),e[1].spells.sort();var l=[];e[1].spells=e[1].spells.filter(function(e){var t=!l.includes(e);return l.push(e),t})})):l.go("spellbook.characters"),a.saveCharacters(),s.total=Object.entries(s.spells).reduce(function(e,l){return e+l[1].spells.length},0)},s.cast=function(e){a.selectedCharacter.knownSpells[e].cast++,a.saveCharacters()},s.delete=function(l,t){e.debug("SpellbookBookController ctrl.delete",l,t),a.selectedCharacter.knownSpells[l].spells.splice(t,1),a.saveCharacters()},s.resetCast=function(){Object.entries(s.spells).forEach(function(e){e[1].spells.forEach(function(e){delete e.cast})}),a.saveCharacters()}}],bindings:{spells:"<",className:"<"}};l.default=n},"7FSA":function(e,l){e.exports='<div id="list-new-{{$ctrl.collapseName}}" style="height:{{$ctrl.elementHeight}}px; padding-top:{{$ctrl.start*52}}px">\n  <table class="table table-sm" style="">\n    <tbody>\n      <tr ng-repeat="spell in $ctrl.spellsL track by $index">\n        <td ng-click="$ctrl.chooseSpell(spell)">\n          <a href="#" class="text-dark">\n            {{spell.name}}\n          </a>\n        </td>\n        <td class="float-right">\n          <button type="button" rel="tooltip" title="" class="btn btn-primary btn-link btn-sm" ng-click="$ctrl.changeFav(spell)">\n            <i class="fa-lg fa-star" ng-class="{\'fas text-primary\': $ctrl.isFav(spell), \'far text-muted\': !$ctrl.isFav(spell)}"></i>\n            <div class="ripple-container"></div>\n          </button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n'},"87dM":function(e,l,t){"use strict";angular.module("app.services",[]),t("TBcf"),t("dlRy"),t("BvtR"),t("vNZY"),t("RNwA"),t("LVIG")},"8VTT":function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("/WX3"),controller:["$log","$state","spellbookService","CLASSES",function(e,l,t,n){e.debug("CharacterItemController create");var a=this;a.$onInit=function(){e.debug("CharacterItemController init"),a.classes=n},a.delete=function(){t.deleteCharacter(a.id),a.deleteMode=!1},a.characterSelected=function(){return a.characters.indexOf(t.selectedCharacter)},a.selectCharacter=function(e){t.selectCharacter(e),e.prepared?l.go("spellbook.prepared"):l.go("spellbook.known")},a.startDelete=function(){a.deleteMode=!0},a.cancelDelete=function(){a.deleteMode=!1}}],bindings:{character:"<",selected:"<",id:"<"}};l.default=n},"9I0W":function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("MiZw"),controller:["$log","$rootScope","$state",function(e,l,t){e.debug("SpellController create");var n=this;n.$onInit=function(){n.root=l;var a=angular.element("#exampleModal");e.debug("Modal popup",a),a.on("hidden.bs.modal",function(){l.newstate?t.go(l.newstate):t.go("list")}),a.on("show.bs.modal",function(){e.debug("Modal popup",n.spell),n.root=l}),a.modal("show")}}],bindings:{spell:"<",prevstate:"<"}};l.default=n},"9iD9":function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("0Vjt"),controller:["$log","$state","$rootScope","$scope","$timeout","filterService","spellService","CLASSES","$window","$document",function(e,l,t,n,a,r,s,c,o,i){e.debug("SpellListController create");var d=this;d.$onInit=function(){e.debug("SpellListController init"),d.classesC=c},d.chooseSpell=function(e){s.showSpell(e.name)},d.isFav=function(e){return r.isFav(e)},d.changeFav=function(e){r.changeFav(e)},d.click=function(e){var l=i.scrollTop();a(i.scrollTop(l))}}],bindings:{spells:"<",className:"<"}};l.default=n},"9ppo":function(e,l){e.exports='<div class="card-header" role="tab" id="heading{{$ctrl.index}}" data-toggle="collapse" href="#collapse{{$ctrl.index}}" aria-expanded="false" aria-controls="collapse{{$ctrl.index}}">\n  <h5 class="mb-0 text-primary">\n    <a>\n      Level {{$ctrl.level}}\n      <i class="float-right fas fa-chevron-down expanded-flip"></i>\n      <button ng-if="!$ctrl.editMode" class="btn btn-sm btn-round float-right mr-1" ng-click="$ctrl.edit();$event.stopPropagation();">edit</button>\n    </a>\n  </h5>\n  <div ng-if="!$ctrl.editMode" class=\'text-dark\'>\n    <small ng-class="{\'text-danger\': $ctrl.spellLevel.spells.length>$ctrl.spellLevel.perDay, \'text-warning\': $ctrl.spellLevel.spells.length<$ctrl.spellLevel.perDay}">Prepared <span >{{$ctrl.spellLevel.spells.length}}/{{$ctrl.spellLevel.perDay}}</span></small>\n    <small ng-if="$ctrl.level!=\'0\'" class=\'ml-2\'>Cast {{$ctrl.castSpells()}}/{{$ctrl.spellLevel.perDay}}</small>\n  </div>\n  <div class="mt-2" ng-if="$ctrl.editMode">\n    <form name="addCharacterForm" ng-submit="$ctrl.saveEdit()" ng-click="$event.stopPropagation();">\n      <div class="row">\n        <div class="form-group label-floating bmd-form-group col-6">\n          <label class="control-label bmd-label-static pl-3" for="perDay">Spells per Day</label>\n          <input id=\'perDay\' name=\'perDay\' min=\'0\' step=\'1\' type="number" ng-model=\'$ctrl.perDay\' class="form-control">\n        </div>\n      </div>\n      <div class="form-group">\n        \x3c!-- ng-disabled="addPcForm.$invalid" --\x3e\n        <button type="submit" class="btn btn-success" ng-click="$ctrl.saveEdit();$event.stopPropagation();">Save</button>\n        <button type="button" class="btn btn-danger" ng-click="$ctrl.cancelEdit();$event.stopPropagation();">Cancel</button>\n      </div>\n    </form>\n  </div>\n</div>\n\n<div id="collapse{{$ctrl.index}}" ng-if="$ctrl.spellLevel.spells.length" class="collapse" role="tabpanel" aria-labelledby="heading{{$ctrl.index}}" data-parent="#accordionExample">\n  <div class="card-body">\n    <table class="table table-sm">\n      <tbody>\n        <tr ng-repeat="spell in $ctrl.spellLevel.spells">\n          <td ng-click="$ctrl.chooseSpell(spell.name)">\n            <a href="#" class="text-dark">\n              {{spell.name}}\n            </a>\n            \x3c!-- <div><small class="text-info">{{spell.duration}}</small>; <small class="text-info">{{spell.savingThrow}}</small></div> --\x3e\n          </td>\n          <td class="float-right">\n            <a href="#" class="ml-2 mr-3" ng-click="$ctrl.delete($ctrl.level, $index)">\n              <i class="fas fa-trash text-danger"></i>\n              <div class="ripple-container"></div>\n            </a>\n          </td>\n          <td ng-if="$ctrl.level!=\'0\'" class="float-right">\n            <a href="#" class="ml-2 mr-3" ng-disabled="spell.cast" ng-click="$ctrl.cast($ctrl.level, $index)">\n              <i class="fas fa-scroll" ng-class="{\'text-muted\': spell.cast, \'text-success\': !spell.cast}"></i>\n              <div class="ripple-container"></div>\n            </a>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n'},Abyr:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("/w8e"),controller:["notificationService","filterService","$log","$window","SCHOOLS",function(e,l,t,n,a){t.debug("FilterController create");var r=this,s=n.localStorage;r.$onInit=function(){t.debug("FilterController init "),JSON.parse(s.getItem("FAV_ONLY")),r.favOnly=l.favOnly,r.schools=a,r.schoolSelected="any",r.filters=[],r.setSchool()},r.search=function(){t.debug("AppController ctrl.search",r.filter),r.filters=[],"any"!=r.schoolSelected&&r.filters.push(a[r.schoolSelected].name),l.filterText=r.filter,e.notify(e.FILTER_CHANGED,void 0)},r.setSchool=function(){l.school=r.schoolSelected,r.search()},r.setFavOnly=function(){l.setFavOnly(r.favOnly),r.search()},r.reset=function(){r.filter="",r.schoolSelected="any",l.school=r.schoolSelected}}],bindings:{}};l.default=n},"B/Tr":function(e,l,t){e.exports='<nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">\n  <div class="container-fluid">\n    <div class="navbar-wrapper" style="width: 100%;">\n      <a ui-sref="main"><img src="'+t("TtU3")+'" style="width: 72px;" class="img-fluid float-left" alt="Responsive image"></a>\n      <div class="ml-4 container">\n        <div class="row">\n          <h3 class="text-light mt-1 mb-1">\n            <span>{{$ctrl.title}}</span>\n          </h3>\n        </div>\n        <div class="row">\n          <h6 class="text-primary" ng-if="$ctrl.subtitle">\n            <span>{{$ctrl.subtitle}}</span>\n          </h6>\n        </div>\n      </div>\n      <sidebar-toggle></sidebar-toggle>\n    </div>\n  </div>\n</nav>\n'},BfhM:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("thb7"),controller:["$log","sidebarService",function(e,l){e.debug("SidebarToggleController create");var t=this;t.$onInit=function(){e.debug("SidebarToggleController init "),t.mobile_menu_visible=0},t.toggleSidebar=function(){e.debug("SidebarToggleController toggleSidebar"),l.toggleSidebar()}}],bindings:{}};l.default=n},BvtR:function(e,l,t){"use strict";angular.module("app.services").factory("spellbookService",["$log","$window",function(e,l){var t={},n=l.localStorage;return t.characters=[],t.characters=JSON.parse(n.getItem("CHARACTERS"))?JSON.parse(n.getItem("CHARACTERS")):[],t.selectedCharacter=JSON.parse(n.getItem("SELECTED_CHARACTER"))?JSON.parse(n.getItem("SELECTED_CHARACTER")):void 0,t.addCharacter=function(e){t.characters.push(e),t.saveCharacters()},t.deleteCharacter=function(e){t.characters.splice(e,1),t.saveCharacters()},t.selectCharacter=function(e){t.selectedCharacter=e},t.isNameExists=function(e){return!!t.characters.find(function(l){return e.toUpperCase()==l.name.toUpperCase()})},t.saveCharacters=function(){n.setItem("CHARACTERS",JSON.stringify(t.characters))},t}])},G4BT:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("7FSA"),controller:["$log","$state","$scope","$rootScope","$timeout","filterService","spellService","$window","$document",function(e,l,t,n,a,r,s,c,o){e.debug("SpellListLightController create");var i=this;i.$onInit=function(){e.debug("SpellListLightController init"),angular.element(c).bind("scroll",function(){i.redraw()}),angular.element(c).bind("resize",function(){i.redraw()})},i.$doCheck=function(){if(i.collapse=angular.element("#"+i.collapseName),i.collapse.attr("class")){if(i.classes=i.collapse.attr("class").split(" "),i.scroll=o.scrollTop(),i.offsetTop=angular.element("#list-new-"+i.collapseName).offset(),i.offsetTop&&i.scroll>i.offsetTop.top+52*i.spells.length)return;if(i.elementHeight=52*i.spells.length,i.height=c.innerHeight,i.offsetTop){if(i.scroll>i.offsetTop.top+52*i.spells)return;var e=i.height/52+2,l=Math.min(Math.max(0,Math.floor((i.scroll-i.offsetTop.top)/52)),i.spells.length);e==i.elements&&l==i.start||(i.start=l,i.elements=e,i.spellsL=i.spells.slice(i.start,i.start+i.elements))}}},i.redraw=function(){i.$doCheck(),t.$digest()},i.chooseSpell=function(e){s.showSpell(e.name)},i.isFav=function(e){return r.isFav(e)},i.changeFav=function(e){r.changeFav(e)}}],bindings:{spells:"<",collapseName:"<"}};l.default=n},HBlH:function(e,l){e.exports='\x3c!-- <spell spell="$ctrl.spell"></spell> --\x3e\n<div class="card">\n  <div class="card-header card-header-primary">\n    \x3c!-- colors: "header-primary", "header-info", "header-success", "header-warning", "header-danger" --\x3e\n    <div class="nav-tabs-navigation">\n      <div class="nav-tabs-wrapper">\n        <ul class="nav nav-tabs" data-tabs="tabs">\n          <li class="nav-item">\n            <a class="nav-link" ui-sref="spellbook.characters" ui-sref-active="active">\n              <i class="fas fa-user"></i> Characters\n              <div class="ripple-container"></div>\n            </a>\n          </li>\n          <li class="nav-item" ng-if="$ctrl.selectedCharacter() && $ctrl.selectedCharacter().prepared">\n            <a class="nav-link" ui-sref="spellbook.prepared" ui-sref-active="active">\n              <i class="fas fa-scroll"></i> Spells Prepared\n              <div class="ripple-container"></div>\n            </a>\n          </li>\n          <li class="nav-item" ng-if="$ctrl.selectedCharacter() && !$ctrl.selectedCharacter().prepared">\n            <a class="nav-link" ui-sref="spellbook.known" ui-sref-active="active">\n              <i class="fas fa-scroll"></i> Spells Known\n              <div class="ripple-container"></div>\n            </a>\n          </li>\n          <li class="nav-item" ng-if="$ctrl.selectedCharacter() && $ctrl.selectedCharacter().spellbook">\n            <a class="nav-link" ui-sref="spellbook.book" ui-sref-active="active">\n              <i class="fas fa-book"></i> Spellbook\n              <div class="ripple-container"></div>\n            </a>\n          </li>\n          <li class="nav-item" ng-if="$ctrl.selectedCharacter()">\n            <a class="nav-link" ui-sref="spellbook.list" ui-sref-active="active">\n              <i class="fas fa-hat-wizard"></i> Spell List\n              <div class="ripple-container"></div>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n\n  <div class="card-body">\n    <ui-view></ui-view>\n  </div>\n  <div class="card-footer">\n  </div>\n</div>\n'},"HT+c":function(e,l){e.exports='<div ng-if=\'!$ctrl.total\' class="alert alert-info" role="alert">\n  There are no spells in spellbook!  You can add ones from <a ui-sref="spellbook.list" class="alert-link">spell list</a>.\n</div>\n\n<div class="accordion" id="accordionExample">\n  <div ng-repeat="(key, value) in $ctrl.book" class="card card-collapse">\n    <div class="card-header" ng-if="value.length" role="tab" id="heading{{$index}}" data-toggle="collapse" href="#collapse{{$index}}" aria-expanded="false" aria-controls="collapse{{$index}}">\n      <h5 class="mb-0 text-primary">\n        <a >\n          Level {{key}}\n          <i class="float-right fas fa-chevron-down expanded-flip"></i>\n          <div><small class=\'text-muted\'>count {{value.length}}</small></div>\n        </a>\n      </h5>\n    </div>\n\n    <div id="collapse{{$index}}" ng-if="value.length" class="collapse" role="tabpanel" aria-labelledby="heading{{$index}}" data-parent="#accordionExample">\n      <div class="card-body">\n        <table class="table table-sm">\n          <tbody>\n            <tr ng-repeat="spell in value">\n              <td ng-click="$ctrl.chooseSpell(spell)">\n                <a href="#" class="text-dark">\n                  {{spell}}\n                </a>\n                \x3c!-- <div><small class="text-info">{{spell.duration}}</small>; <small class="text-info">{{spell.savingThrow}}</small></div> --\x3e\n              </td>\n              <td class="float-right">\n                <a href="#" class="ml-2 mr-3" ng-class="{\'text-primary\': $ctrl.prepared || !$ctrl.isSpellPrepared(spell), \'text-muted\': !$ctrl.prepared && $ctrl.isSpellPrepared(spell)}" ng-disable="!$ctrl.prepared && $ctrl.isSpellPrepared(spell)" ng-click="$ctrl.addSpell(key, spell)">\n                  <span class="badge badge-secondary" ng-if="$ctrl.prepared && $ctrl.isSpellPrepared(spell)"><small>{{$ctrl.isSpellPrepared(spell)}}</small></span>\n                  <i class="fas fa-scroll"></i>\n                  <div class="ripple-container"></div>\n                </a>\n                <a href="#" class="ml-2 mr-3" ng-click="$ctrl.delete(key, $index)">\n                  <i class="fas fa-trash text-danger"></i>\n                  <div class="ripple-container"></div>\n                </a>\n                \x3c!-- <a href="#" class="ml-2" ng-click="$">\n                  <i class="fas fa-chevron-circle-down text-primary"></i>\n                  <div class="ripple-container"></div>\n                </a> --\x3e\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n'},Ha7V:function(e,l,t){"use strict";t("KHwQ"),t("2C69"),t("wmx0"),t("102d"),t("zOca"),t("6n4l"),t("0Pgu"),t("QFgh"),t("87dM"),t("NxeQ");var n,a=t("UBDB"),r=(n=a)&&n.__esModule?n:{default:n};var s=t("M55E");"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js").then(function(e){console.log("SW registered: ",e)}).catch(function(e){console.log("SW registration failed: ",e)})});var c=angular.module("scrollbearApp",["pages.components","app.components","app.constants","app.services","app.filters","ui.router","ngSanitize"]);c.component("app",r.default),c.config(["$stateProvider","$locationProvider","$urlRouterProvider",function(e,l,t){e.state({name:"main",url:"/",template:"<ui-view></ui-view>",onEnter:["$rootScope",function(e){e.title="",e.description="Scrollbear spellbook reference for Pathfinder RPG."}]}),e.state({name:"list",url:"/",component:"main",onEnter:["$rootScope",function(e){e.title="",e.description="Scrollbear spellbook reference for Pathfinder RPG."}]}),e.state({name:"license",url:"/legal",component:"license"}),e.state({name:"spellbook",url:"/spellbook",component:"spellbook",onEnter:["$rootScope",function(e){e.title="Spellbook - ",e.description="Scrollbear spellbook reference for Pathfinder RPG."}]}).state({name:"spellbook.characters",url:"/characters",component:"characters"}).state({name:"spellbook.newcharacter",url:"/characters/new",component:"newcharacter"}).state({name:"spellbook.prepared",url:"/prepared",component:"prepared"}).state({name:"spellbook.known",url:"/known",component:"known"}).state({name:"spellbook.list",url:"/list",component:"spellbookSpelllist"}).state({name:"spellbook.book",url:"/book",component:"spellbookBook"}),e.state({name:"spells",url:"spells/:spellUrl",component:"spell",parent:"main",resolve:{spell:["$rootScope","spellService","$stateParams",function(e,l,t){console.log("spells spell",n);var n=l.getSpellByUrl(t.spellUrl);e.title=n.name+" - ",e.spell=n;var a,r=(a=n.description,("<div>"+new s.Converter({tables:!0,strikethrough:!0}).makeHtml(a)+"</div>").replace(/<table>/g,"<div class='table-responsive'><table class='table table-sm'>").replace(/<\/table>/g,"</table></div>").replace(/<thead>/g,"<thead class='text-primary'>"));return e.description=n.description,e.spellDescription=r,n}],prevstate:["$transition$","$rootScope",function(e,l){return console.log("spells prevState"),console.log("prevState",e.from()),l.newstate=e.from().name,e.from()}]},onEnter:["spell","$rootScope","$state",function(e,l,t){}],onExit:["$transition$","$rootScope","$state",function(e,l){"spells"!=e.to().name&&(angular.element("#exampleModal").modal("hide"),angular.element(".modal-backdrop").remove(),angular.element("body").removeClass("modal-open"))}]}),t.otherwise("/"),l.html5Mode(!0)}]),c.run(["$log","$transitions","$location","$state","$rootScope","sidebarService",function(e,l,t,n,a,r){l.onStart({},function(e){if(console.log("onBefore Transition from "+e.from().name+" to "+e.to().name),t.search()._escaped_fragment_){var l=t.search()._escaped_fragment_;t.search({}),t.path(l)}angular.element("#modalSpell").modal("hide"),angular.element(".modal-backdrop").remove(),angular.element("body").removeClass("modal-open")}),l.onFinish({},function(e){console.log("onFinish Transition"),r.disableSidebar()}),l.onStart({from:"spells"},function(e){a.newstate=e.to()}),l.onStart({to:"main"},function(e){return console.log("onStart Transition from "+e.from().name+" to "+e.to().name),e.router.stateService.target("list")}),l.onStart({to:"spellbook"},function(e){return console.log("onStart Transition from "+e.from().name+" to "+e.to().name),e.router.stateService.target("spellbook.characters")})}])},"Ih/f":function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),t("9gO7");var n={template:t("3GSd"),controller:["$log",function(e){e.debug("PageFooterController create");var l=this;l.$onInit=function(){e.debug("PageFooterController init "),l.version="1.8.9"}}],bindings:{}};l.default=n},KNhS:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("X5G1"),controller:["$log","$state","spellbookService","CLASSES",function(e,l,t,n){e.debug("CharactersController create");var a=this;a.$onInit=function(){e.debug("CharactersController init"),a.classes=n,a.characters=t.characters},a.add=function(){l.go("spellbook.newcharacter")},a.characterSelected=function(){return a.characters.indexOf(t.selectedCharacter)}}]};l.default=n},LVIG:function(e,l,t){"use strict";angular.module("app.services").factory("notificationService",["$rootScope","$log",function(e,l){var t={FILTER_CHANGED:"Filter:Changed",subscribe:function(l,t,n){var a=e.$on(t,n);l.$on("$destroy",a)},notify:function(t,n){l.debug("NotificationService.notify",t,n),e.$emit(t,n)}};return t}])},"Ly/k":function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("3v8e"),controller:["$log","$state","$scope","$document","$timeout","notificationService","filterService","spellService","spellbookService","CLASSES",function(e,l,t,n,a,r,s,c,o,i){e.debug("SpellbookSpellListController create");var d=this;function p(){d.otherSpellsCount=0;var e=c.getSpellsSplited();return d.total=Object.entries(e).reduce(function(e,l){return e+l[1].length},0),d.total||(d.otherSpellsCount=c.getSpellsCountByFilter()),e}d.$onInit=function(){e.debug("SpellbookSpellListController init"),o.selectedCharacter||l.go("spellbook.characters"),d.classes=i,d.classSelected=o.selectedCharacter.class,d.setClass(),r.subscribe(t,r.FILTER_CHANGED,function(e,l){d.spells=p()})},d.chooseSpell=function(e){c.showSpell(e.name)},d.search=function(){e.debug("SpellbookSpellListController ctrl.search",d.filter),d.spells=p()},d.setClass=function(){c.setClass(d.classSelected),d.search()},d.classToAll=function(){d.classSelected="all",d.setClass()},d.isInSpellBook=function(e){return!!o.selectedCharacter.book&&Object.entries(o.selectedCharacter.book).reduce(function(l,t){return l||t[1].reduce(function(l,t){return l||t==e},!1)},!1)},d.isSpellPrepared=function(e){if(o.selectedCharacter.prepared){if(o.selectedCharacter.preparedSpells)return Object.entries(o.selectedCharacter.preparedSpells).reduce(function(l,t){return l+t[1].spells.reduce(function(l,t){return l+(t.name==e?1:0)},0)},0)}else if(o.selectedCharacter.knownSpells)return Object.entries(o.selectedCharacter.knownSpells).reduce(function(l,t){return l||t[1].spells.reduce(function(l,t){return l||t==e},!1)},!1);return!1},d.addToBook=function(e,l){o.selectedCharacter.book||(o.selectedCharacter.book={}),console.log(l.levels);var t=l.levels.reduce(function(e,l){if(i[d.classSelected].search.reduce(function(e,t){return e||l.startsWith(t)},!1)){var t=l.substring(l.length-1);if(!e||e>t)return t}return e},void 0);null==t&&(t=e),o.selectedCharacter.book[t]||(o.selectedCharacter.book[t]=[]),o.selectedCharacter.book[t].push(l.name),o.saveCharacters()},d.addSpell=function(e,l){var t=l.levels.reduce(function(e,l){if(i[d.classSelected].search.reduce(function(e,t){return e||l.startsWith(t)},!1)){var t=l.substring(l.length-1);if(!e||e>t)return t}return e},void 0);null==t&&(t=e),o.selectedCharacter.prepared?(o.selectedCharacter.preparedSpells||(o.selectedCharacter.preparedSpells={}),o.selectedCharacter.preparedSpells[t]||(o.selectedCharacter.preparedSpells[t]={spells:[]}),o.selectedCharacter.preparedSpells[t].spells.push({name:l.name})):(o.selectedCharacter.knownSpells||(o.selectedCharacter.knownSpells={}),o.selectedCharacter.knownSpells[t]||(o.selectedCharacter.knownSpells[t]={spells:[]}),o.selectedCharacter.knownSpells[t].spells.push(l.name)),o.saveCharacters(),console.log(o.selectedCharacter)},d.click=function(e){var l=n.scrollTop();a(n.scrollTop(l))}}],bindings:{spells:"<",className:"<"}};l.default=n},MiZw:function(e,l){e.exports='\x3c!-- <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="false">\n  <div class="modal-dialog modal-lg" role="document"> --\x3e\n    <div class="modal-content">\n      <div class="modal-header">\n        <h3 class="modal-title" id="exampleModalLabel">{{$ctrl.root.spell.name}}</h3>\n        \x3c!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span class="fas fa-times"></span>\n        </button> --\x3e\n      </div>\n      <div class="modal-body">\n        <div>\n          <div class="spell-description">\n            <p><b>School </b> {{$ctrl.root.spell.school}}<span ng-if="$ctrl.root.spell.subschool"> ({{$ctrl.root.spell.subschool}})</span><span ng-if="$ctrl.root.spell.descripters.length"> [{{$ctrl.root.spell.descripters | array}}]</span>;\n              <b>Level </b><span>{{$ctrl.root.spell.levels | array}}</span></p>\n            <p><b>Casting Time </b> {{$ctrl.root.spell.castingTime}}</p>\n            <p><b>Components </b> {{$ctrl.root.spell.components | array}}</p>\n            <p><span ng-if="$ctrl.root.spell.range"><b>Range </b>{{$ctrl.root.spell.range}}</span></p>\n            <p><span ng-if="$ctrl.root.spell.area"><b>Area </b>{{$ctrl.root.spell.area}}</span></p>\n            <p><span ng-if="$ctrl.root.spell.target"><b>Target </b>{{$ctrl.root.spell.target}}</span></p>\n            <p><span ng-if="$ctrl.root.spell.targets"><b>Targets </b>{{$ctrl.root.spell.targets}}</span></p>\n            <p><span ng-if="$ctrl.root.spell.effect"><b>Effect </b>{{$ctrl.root.spell.effect}}</span></p>\n            <p><span ng-if="$ctrl.root.spell.duration"><b>Duration </b>{{$ctrl.root.spell.duration}}</span></p>\n            <p><span ng-if="$ctrl.root.spell.savingThrow"><b>Saving Throw </b>{{$ctrl.root.spell.savingThrow}}; <b>Spell Resistance </b>{{$ctrl.root.spell.spellResistance}}</span></p>\n          </div>\n          \x3c!-- <p ng-repeat="paragraph in $ctrl.root.spell.description.split(\'\\n\') track by $index">{{paragraph}}</p> --\x3e\n          <ng-bind-html ng-bind-html="$ctrl.root.spellDescription"></ng-bind-html>\n          <div ng-if="$root.spellSource"><small><ng-bind-html ng-bind-html="$root.spellSource"></ng-bind-html></small></div>\n        </div>\n      </div>\n      \x3c!-- <div class="modal-footer">\n        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n      </div> --\x3e\n    </div>\n  \x3c!-- </div>\n</div> --\x3e\n'},Muoi:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("XAXJ"),controller:["$log",function(e){e.debug("SidebarController create"),this.$onInit=function(){e.debug("SidebarController init ")}}],bindings:{}};l.default=n},NxeQ:function(e,l,t){"use strict";var n=angular.module("app.constants",[]);n.constant("CLASSES",{all:{name:"All"},alchemist:{name:"Alchemist",search:["alchemist"]},antipaladin:{name:"Antipaladin",search:["antipaladin"]},arcanist:{name:"Arcanist",search:["arcanist","wizard","sorcerer"]},bard:{name:"Bard",search:["bard"]},bloodrager:{name:"Bloodrager",search:["bloodrager"]},cleric:{name:"Cleric",search:["cleric"]},druid:{name:"Druid",search:["druid"]},hunter:{name:"Hunter",search:["hunter","druid","ranger"]},inquisitor:{name:"Inquisitor",search:["inquisitor"]},investigator:{name:"Investigator",search:["investigator","alchemist"]},magus:{name:"Magus",search:["magus"]},medium:{name:"Medium",search:["medium"]},mesmerist:{name:"Mesmerist",search:["mesmerist"]},occultist:{name:"Occultist",search:["occultist"]},oracle:{name:"Oracle",search:["oracle","cleric"]},paladin:{name:"Paladin",search:["paladin"]},psychic:{name:"Psychic",search:["psychic"]},ranger:{name:"Ranger",search:["ranger"]},shaman:{name:"Shaman",search:["shaman"]},skald:{name:"Skald",search:["bard","skald"]},sorcerer:{name:"Sorcerer",search:["sorcerer"]},spiritualist:{name:"Spiritualist",search:["spiritualist"]},summoner:{name:"Summoner",search:["summoner"]},warpriest:{name:"Warpriest",search:["warpriest","cleric"]},witch:{name:"Witch",search:["witch"]},wizard:{name:"Wizard",search:["wizard","sorcerer"]}}),n.constant("SCHOOLS",{any:{name:"Any",search:function(e){return!0}},abjuration:{name:"Abjuration",search:["abjuration"]},conjuration:{name:"Conjuration",search:["conjuration"]},divination:{name:"Divination",search:["divination"]},enchantment:{name:"Enchantment",search:["enchantment"]},evocation:{name:"Evocation",search:["evocation"]},illusion:{name:"Illusion",search:["illusion"]},necromancy:{name:"Necromancy",search:["necromancy"]},transmutation:{name:"Transmutation",search:["transmutation"]},other:{name:"Other",search:function(e){return!["transmutation","conjuration","evocation","enchantment","abjuration","necromancy","divination","illusion"].includes(e.school)}}})},PKSm:function(e,l){e.exports='\n<div class="card">\n  <div class="card-header">\n    <form ng-submit="$ctrl.search()">\n      <div class="form-row">\n        <div class="col col-centered ">\n          <select class="form-control" ng-change="$ctrl.setClass()" name="classSelect" id="classSelect" ng-model="$ctrl.classSelected">\n            <option ng-repeat="(key, value) in $ctrl.classes" value="{{key}}">{{value.name}}</option>\n          </select>\n        </div>\n      </div>\n    </form>\n    <filter></filter>\n  </div>\n  <div class="card-body">\n    <spell-list spells="$ctrl.spells" class-name="$ctrl.classSelected"></spell-list>\n    <button ng-if="$ctrl.otherSpellsCount" ng-click="$ctrl.classToAll()" class=\'btn btn-warning\'>Found <strong>{{$ctrl.otherSpellsCount}}</strong> spell{{$ctrl.otherSpellsCount!=1?\'s\':\'\'}} in other classes</button>\n  </div>\n  <div class="card-footer">\n    <div class="container">\n      <span class="float-right">\n        Total: {{$ctrl.total}}\n      </span>\n    </div>\n  </div>\n</div>\n<ui-view></ui-view>\n'},QFgh:function(e,l,t){"use strict";angular.module("app.filters",[]),t("xODW")},RNwA:function(e,l,t){"use strict";angular.module("app.services").factory("focusService",["$log","$timeout","$window",function(e,l,t){var n={setFocus:function(e){l(function(){var l=t.document.getElementById(e);l&&l.focus()})}};return n}])},TBcf:function(e,l,t){"use strict";var n=t("kTu0"),a=t("M55E");angular.module("app.services").factory("spellService",["$log","$window","$rootScope","filterService","CLASSES",function(e,l,t,r,s){var c={};l.localStorage;return c.currentSpells=[],c.classSet=[],c.getAllSpells=function(){return c.currentSpells},c.getSpellsSplited=function(){console.time("SpellService.getSpellsSplited");var e=c.currentSpells.filter(r.filter),l={};return e.forEach(function(e){var t=e.levels.reduce(function(e,l){var t=l.substring(0,l.length-2);if(!s[c.classSet].search||s[c.classSet].search.reduce(function(e,l){return e||t.startsWith(l)},!1)){var n=l.substring(l.length-1);if(!e||n<e)return n}return e},void 0);t&&(l[t]||(l[t]=[]),l[t].push(e))}),console.timeEnd("SpellService.getSpellsSplited"),l},c.setClass=function(e){console.time("SpellService.setClass"),c.classSet=e,c.currentSpells=n.filter(function(l){return!!l.levels&&l.levels.reduce(function(l,t){var n=t.substring(0,t.length-2),a=!s[e].search||s[e].search.reduce(function(e,l){return e||n.startsWith(l)},!1);return l||a},!1)}),console.timeEnd("SpellService.setClass")},c.getSpellByUrl=function(e){return n.find(function(l){return c.spellNameToUrl(l.name)==e})},c.spellNameToUrl=function(e){return e.toLowerCase().trim().replace(/[.*+?^$ ,{}()|[\]\\\/]/g,"-").replace(/[’]/g,"_")},c.getSpellsCountByFilter=function(){return n.filter(r.filter).length},c.showSpell=function(e){var l=n.find(function(l){return l.name==e});t.spell=l,t.description=l.description,t.spellDescription=c.getSpellDescription(l.description),t.spellSource=c.getSpellSource(l.source),angular.element("#modalSpell").modal("show")},c.getSpellDescription=function(e){var l="<div>"+new a.Converter({tables:!0,strikethrough:!0}).makeHtml(e)+"</div>";return l=l.replace(/<table>/g,"<div class='table-responsive'><table class='table table-sm'>").replace(/<\/table>/g,"</table></div>").replace(/<thead>/g,"<thead class='text-primary'>")},c.getSpellSource=function(e){return"<div>"+new a.Converter({tables:!0,strikethrough:!0}).makeHtml(e)+"</div>"},c}])},TtU3:function(e,l,t){e.exports=t.p+"29c29b1671ae5a81d788b944e8611181.png"},UBDB:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("wl6r"),controller:["$log",function(e){this.$onInit=function(){e.debug("AppController init")}}]};l.default=n},W0le:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("9ppo"),controller:["$log","$state","filterService","focusService","spellService","spellbookService","CLASSES",function(e,l,t,n,a,r,s){e.debug("SpellController create");var c=this;c.$onInit=function(){e.debug("PreparedSpelLevelController init")},c.cast=function(e,l){r.selectedCharacter.preparedSpells[e].spells[l].cast=!0,r.saveCharacters()},c.delete=function(l,t){e.debug("SpellbookBookController ctrl.delete",l,t),r.selectedCharacter.preparedSpells[l].spells.splice(t,1),r.saveCharacters()},c.edit=function(){c.perDay=c.spellLevel.perDay,c.known=c.spellLevel.known,c.editMode=!0,n.setFocus("perDay")},c.saveEdit=function(){c.spellLevel.perDay=c.perDay,c.spellLevel.known=c.known,c.editMode=!1,r.saveCharacters()},c.cancelEdit=function(){c.editMode=!1},c.castSpells=function(){return c.spellLevel.spells.reduce(function(e,l){return e+(l.cast?1:0)},0)},c.chooseSpell=function(e){a.showSpell(e)}}],bindings:{spellLevel:"<",level:"<",index:"<"}};l.default=n},X5G1:function(e,l){e.exports='<div ng-if=\'!$ctrl.characters.length\' class="alert alert-info" role="alert">\n  There are no characters!\n</div>\n\n<div class="list-group characters">\n  <character-item ng-repeat="character in $ctrl.characters track by $index" character="character" selected="$ctrl.characterSelected() == $index" id="$index"></character-item>\n</div>\n\n<button class=\'btn btn-success\' ng-click="$ctrl.add()">Add new character</button>\n'},XAXJ:function(e,l){e.exports='<div class="sidebar" data-color="purple" data-background-color="white">\n  <div class="logo">\n    <a href="https://owlbeardm.com/" class="simple-text logo-normal">\n      OwlbearDM\n    </a>\n  </div>\n\n  <div class="sidebar-wrapper">\n    <ul class="nav">\n      <li class="nav-item" ui-sref-active="active">\n        <a class="nav-link navbar-toggler" ui-sref="list" >\n          <i class="fas fa-scroll"></i>\n          <p>\n            Spells\n          </p>\n        </a>\n      </li>\n      <li class="nav-item" ui-sref-active="active">\n        <a class="nav-link" ui-sref="spellbook">\n          <i class="fas fa-user"></i>\n          <p>\n            Characters\n          </p>\n        </a>\n      </li>\n      <li class="nav-item" ui-sref-active="active">\n        <a class="nav-link" ui-sref="license">\n          <i class="fas fa-file-alt"></i>\n          <p>\n            License\n          </p>\n        </a>\n      </li>\n    </ul>\n  </div>\n  <div class="sidebar-background"></div>\n</div>\n'},Zrls:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n=t("adW0"),a=t("M55E");var r={template:t("kff8"),controller:["$log",function(e){e.debug("LicenseController create");var l=this;l.$onInit=function(){e.debug("LicenseController init");var t=new a.Converter({tables:!0,strikethrough:!0});l.legal="<div>"+t.makeHtml(n.license)+"</div>"}}]};l.default=r},aTH2:function(e,l){e.exports='<form name="addCharacterForm" ng-submit="$ctrl.add()">\n  <div class="form-group label-floating bmd-form-group" ng-class="{\'has-danger\': addCharacterForm.name.$dirty && (!$ctrl.name || $ctrl.isNameExists), \'has-success\': addCharacterForm.name.$dirty && $ctrl.name && !$ctrl.isNameExists}">\n    <label class="control-label bmd-label-static" for="classSelect">Name</label>\n    <input id=\'name\' name="name" type="text" ng-model=\'$ctrl.name\' ng-change=\'$ctrl.checkIfNameExists()\' class="form-control">\n    <span class="form-control-feedback">\n      <i class="material-icons" ng-if="addCharacterForm.name.$dirty && (!$ctrl.name || $ctrl.isNameExists)">clear</i>\n      <i class="material-icons" ng-if="addCharacterForm.name.$dirty && $ctrl.name && !$ctrl.isNameExists">done</i>\n    </span>\n    <label id="name-empy-error" ng-class="{\'error\': addCharacterForm.name.$dirty}" ng-if=\'!$ctrl.name\' for="name">This field is required.</label>\n    <label id="name-double-error" ng-if="$ctrl.isNameExists" class="error" for="name">Character with this name already exists.</label>\n  </div>\n  <div class="form-group">\n    <div class="form-check form-check-radio">\n      <label class="form-check-label text-dark">\n        <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" ng-model="$ctrl.prepared" ng-value="false">\n        Spontaneous casting\n        <span class="circle">\n          <span class="check"></span>\n        </span>\n      </label>\n    </div>\n    <div class="form-check form-check-radio">\n      <label class="form-check-label text-dark">\n        <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" ng-model="$ctrl.prepared" ng-value="true">\n        Prepared casting\n        <span class="circle">\n          <span class="check"></span>\n        </span>\n      </label>\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="form-check">\n      <label class="form-check-label text-dark">\n        <input class="form-check-input" type="checkbox" ng-model="$ctrl.spellbook">\n        Include spellbook (witch\'s familiar, etc)\n        <span class="form-check-sign">\n          <span class="check"></span>\n        </span>\n      </label>\n    </div>\n  </div>\n  <div class="form-group label-floating bmd-form-group">\n    <label class="control-label bmd-label-static" for="classSelect">Class</label>\n    <select class="form-control" name="classSelect" id="classSelect" ng-model="$ctrl.classSelected">\n      <option ng-repeat="(key, value) in $ctrl.classes" value="{{key}}">{{value.name}}</option>\n    </select>\n    <label id="name-empy-error" ng-class="{\'error\': addCharacterForm.classSelect.$dirty}" ng-if=\'!$ctrl.classSelected\' for="classSelect">This field is required.</label>\n  </div>\n  <div class="form-group">\n    \x3c!-- ng-disabled="addPcForm.$invalid" --\x3e\n    <button type="submit" class="btn btn-primary" ng-disabled=\'!$ctrl.classSelected || !$ctrl.name || $ctrl.isNameExists\'>Add</button>\n    <button type="button" class="btn btn-danger" ng-click="$ctrl.goBack()">Cancel</button>\n  </div>\n</form>\n'},dlRy:function(e,l,t){"use strict";angular.module("app.services").factory("sidebarService",["$log","$document","$interval",function(e,l,t){var n={sidebarEnabled:!1,toggleSidebar:function(){n.sidebarEnabled?n.disableSidebar():n.enableSidebar()},enableSidebar:function(){l.find("html").addClass("nav-open"),t(function(){l.find(".navbar-toggler").addClass("toggled")},430,1);var e=angular.element('<div class="close-layer"></div>');0!=l.find("body").find(".main-panel").length?l.find("body").find(".main-panel").append(e):l.find("body").hasClass("off-canvas-sidebar")&&l.find(".wrapper-full-page").append(e),t(function(){e.addClass("visible")},100,1),e.click(function(){n.disableSidebar()}),n.sidebarEnabled=!0},disableSidebar:function(){l.find("html").removeClass("nav-open"),l.find(".close-layer").removeClass("visible"),t(function(){l.find(".close-layer").remove(),l.find(".toggled").removeClass("toggled")},400,1),n.sidebarEnabled=!1}};return n}])},"g+cT":function(e,l){e.exports='<div ng-if=\'!$ctrl.total\' class="alert alert-info" role="alert">\n  There are no prepared spells! You can add ones from <a ui-sref="spellbook.list" class="alert-link">spell list</a>.\n</div>\n\n<button ng-if=\'$ctrl.total\' ng-click="$ctrl.resetCast()" class=\'btn btn-primary mb-3 float-right mr-4\'>Reset cast</button>\n\n<div ng-if=\'$ctrl.total\' class="accordion" id="accordionExample">\n  <div ng-repeat="(key, value) in $ctrl.spells" class="card card-collapse">\n    <prepared-spell-level spell-level="value" level="key" index="$index"></prepared-spell-level>\n  </div>\n</div>\n'},gNSh:function(e,l){e.exports='<div id="list-new-{{$ctrl.collapseName}}" style="height:{{$ctrl.elementHeight}}px; padding-top:{{$ctrl.start*40}}px">\n  <table class="table table-sm">\n    <tbody>\n      <tr ng-repeat="spell in $ctrl.spellsL track by $index">\n        <td ng-click="$ctrl.chooseSpell(spell)">\n          <a href="#" class="text-dark">\n            {{spell.name}}\n          </a>\n        </td>\n        <td class="float-right mb-1">\n          <a href="#" class="ml-2 mr-3" ng-class="{\'text-primary\': $ctrl.prepared || !$ctrl.isSpellPrepared(spell.name), \'text-muted\': !$ctrl.prepared && $ctrl.isSpellPrepared(spell.name)}" ng-disable="!$ctrl.prepared && $ctrl.isSpellPrepared(spell.name)" ng-click="$ctrl.addSpell(key, spell)">\n            <span class="badge badge-secondary" ng-if="$ctrl.prepared && $ctrl.isSpellPrepared(spell.name)"><small>{{$ctrl.isSpellPrepared(spell.name)}}</small></span>\n            <i class="fas fa-scroll"></i>\n            <div class="ripple-container"></div>\n          </a>\n          <a href="#" ng-if="$ctrl.spellbook" class="ml-2 mr-3 text-primary" ng-class="{\'text-primary\': !$ctrl.isInSpellBook(spell.name), \'text-muted\': $ctrl.isInSpellBook(spell.name)}" ng-disable="$ctrl.isInSpellBook(spell.name)" ng-click="$ctrl.addToBook(key, spell)">\n            <i class="fas fa-book"></i>\n            <div class="ripple-container"></div>\n          </a>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n'},hAGq:function(e,l){e.exports='<div class="card-header" role="tab" id="heading{{$ctrl.index}}" data-toggle="collapse" href="#collapse{{$ctrl.index}}" aria-expanded="false" aria-controls="collapse{{$ctrl.index}}">\n  <h5 class="mb-0 text-primary">\n    <a>\n      Level {{$ctrl.level}}\n      <i class="float-right fas fa-chevron-down expanded-flip"></i>\n      <button ng-if="$ctrl.level!=\'0\'" ng-if="!$ctrl.editMode" class="btn btn-sm btn-round float-right mr-4" ng-class="{\'btn-danger\': $ctrl.spellLevel.cast >= $ctrl.spellLevel.perDay, \'btn-success\': $ctrl.spellLevel.cast < $ctrl.spellLevel.perDay}" ng-click="$ctrl.cast($ctrl.level);$event.stopPropagation();">cast</button>\n      <button ng-if="!$ctrl.editMode" ng-class="{\'mr-4\': $ctrl.level ==\'0\'}" class="btn btn-sm btn-round float-right mr-1" ng-click="$ctrl.edit();$event.stopPropagation();">edit</button>\n    </a>\n  </h5>\n  <div ng-if="!$ctrl.editMode" class=\'text-dark\'>\n    <small ng-class="{\'text-danger\': $ctrl.spellLevel.spells.length>$ctrl.spellLevel.known, \'text-warning\': $ctrl.spellLevel.spells.length<$ctrl.spellLevel.known}">Known <span >{{$ctrl.spellLevel.spells.length}}/{{$ctrl.spellLevel.known}}</span></small>\n    <small ng-if="$ctrl.level!=\'0\'" class=\'ml-2\' ng-class="{\'text-danger\': $ctrl.spellLevel.cast>=$ctrl.spellLevel.perDay}">Cast <span >{{$ctrl.spellLevel.cast}}/{{$ctrl.spellLevel.perDay}}</span></small>\n  </div>\n  <div class="mt-2" ng-if="$ctrl.editMode">\n    <form name="addCharacterForm" ng-submit="$ctrl.saveEdit()" ng-click="$event.stopPropagation();">\n      <div class="row">\n        <div class="form-group label-floating bmd-form-group col-6">\n          <label class="control-label bmd-label-static pl-3" for="classSelect">Spells Known</label>\n          <input id=\'known\' name="known"  min=\'0\' step=\'1\' type="number" ng-model=\'$ctrl.known\' class="form-control">\n        </div>\n        <div ng-if="$ctrl.level!=\'0\'" class="form-group label-floating bmd-form-group col-6">\n          <label class="control-label bmd-label-static pl-3" for="perDay">Spells per Day</label>\n          <input id=\'perDay\' name="perDay"  min=\'0\' step=\'1\' type="number" ng-model=\'$ctrl.perDay\' class="form-control">\n        </div>\n      </div>\n      <div class="form-group">\n        \x3c!-- ng-disabled="addPcForm.$invalid" --\x3e\n        <button type="submit" class="btn btn-success" ng-click="$ctrl.saveEdit();$event.stopPropagation();">Save</button>\n        <button type="button" class="btn btn-danger" ng-click="$ctrl.cancelEdit();$event.stopPropagation();">Cancel</button>\n      </div>\n    </form>\n  </div>\n</div>\n\n<div id="collapse{{$ctrl.index}}" ng-if="$ctrl.spellLevel.spells.length" class="collapse" role="tabpanel" aria-labelledby="heading{{$ctrl.index}}" data-parent="#accordionExample">\n  <div class="card-body">\n    <table class="table table-sm">\n      <tbody>\n        <tr ng-repeat="spell in $ctrl.spellLevel.spells">\n          <td ng-click="$ctrl.chooseSpell(spell)">\n            <a href="#" class="text-dark">\n              {{spell}}\n            </a>\n            \x3c!-- <div><small class="text-info">{{spell.duration}}</small>; <small class="text-info">{{spell.savingThrow}}</small></div> --\x3e\n          </td>\n          <td class="float-right">\n            <a href="#" class="ml-2 mr-3" ng-click="$ctrl.delete($ctrl.level, $index)">\n              <i class="fas fa-trash text-danger"></i>\n              <div class="ripple-container"></div>\n            </a>\n          </td>\n          <td ng-if="$ctrl.level!=\'0\'" class="float-right">\n            <a href="#" class="ml-2 mr-3" ng-click="$ctrl.cast($ctrl.level)">\n              <i class="fas fa-scroll" ng-class="{\'text-muted\': $ctrl.spellLevel.cast >= $ctrl.spellLevel.perDay, \'text-success\': $ctrl.spellLevel.cast < $ctrl.spellLevel.perDay}"></i>\n              <div class="ripple-container"></div>\n            </a>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n'},hzYb:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("5sqb"),controller:["$log","$state","filterService","spellService","spellbookService","CLASSES",function(e,l,t,n,a,r){e.debug("KnownController create");var s=this;s.$onInit=function(){e.debug("KnownController init"),a.selectedCharacter?(a.selectedCharacter.knownSpells||(a.selectedCharacter.knownSpells={}),s.spells=a.selectedCharacter.knownSpells,Object.entries(s.spells).forEach(function(e){e[1].spells||(e[1].spells=[]),e[1].cast||(e[1].cast=0),e[1].perDay||(e[1].perDay=0),e[1].known||(e[1].known=0),e[1].spells.sort();var l=[];e[1].spells=e[1].spells.filter(function(e){var t=!l.includes(e);return l.push(e),t})})):l.go("spellbook.characters"),a.saveCharacters(),s.total=Object.entries(s.spells).reduce(function(e,l){return e+l[1].spells.length},0)},s.cast=function(e){a.selectedCharacter.knownSpells[e].cast++,a.saveCharacters()},s.delete=function(l,t){e.debug("SpellbookBookController ctrl.delete",l,t),a.selectedCharacter.knownSpells[l].spells.splice(t,1),a.saveCharacters()},s.resetCast=function(){Object.entries(s.spells).forEach(function(e){e[1].cast=0}),a.saveCharacters()}}],bindings:{spells:"<",className:"<"}};l.default=n},kff8:function(e,l){e.exports='<div class="card">\n  <div class="card-header card-header-primary">\n    <h2 class="card-title">Legal Information</h2>\n  </div>\n  <div class="card-body">\n    <ng-bind-html ng-bind-html="$ctrl.legal"></ng-bind-html>\n  </div>\n</div>\n'},paWR:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("PKSm"),controller:["notificationService","filterService","spellService","$window","$state","$scope","$log","CLASSES",function(e,l,t,n,a,r,s,c){s.debug("MainController create");var o=this,i=n.localStorage;function d(){o.otherSpellsCount=0;var e=t.getSpellsSplited();return o.total=Object.entries(e).reduce(function(e,l){return e+l[1].length},0),o.total||(o.otherSpellsCount=t.getSpellsCountByFilter()),e}o.$onInit=function(){s.debug("AppController init"),o.classes=c;var l=JSON.parse(i.getItem("SELECTED_CLASS"));o.classSelected=l&&c[l]?l:"wizard",o.setClass(),e.subscribe(r,e.FILTER_CHANGED,function(e,l){o.spells=d()})},o.search=function(){s.debug("AppController ctrl.search",o.filter),o.spells=d()},o.setClass=function(){t.setClass(o.classSelected),i.setItem("SELECTED_CLASS",JSON.stringify(o.classSelected)),o.search()},o.classToAll=function(){o.classSelected="all",o.setClass()}}]};l.default=n},qSSA:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("aTH2"),controller:["$log","$state","spellbookService","CLASSES",function(e,l,t,n){e.debug("NewCharacterController create");var a=this;a.$onInit=function(){e.debug("CharactersController init"),a.classes=Object.assign({},n),delete a.classes.all,a.prepared=!1,a.spellbook=!1,a.isNameExists=!1},a.add=function(){var e={name:a.name,prepared:a.prepared,spellbook:a.spellbook,class:a.classSelected};t.addCharacter(e),t.selectCharacter(e),e.prepared?l.go("spellbook.prepared"):l.go("spellbook.known")},a.goBack=function(){l.go("spellbook.characters")},a.checkIfNameExists=function(){a.isNameExists=t.isNameExists(a.name)}}]};l.default=n},thb7:function(e,l){e.exports='<button class="navbar-toggler float-right" type="button"  ng-click="$ctrl.toggleSidebar()">\n  <span class="sr-only">Toggle navigation</span>\n  <span class="navbar-toggler-icon icon-bar btn-danger"></span>\n  <span class="navbar-toggler-icon icon-bar text-light"></span>\n  <span class="navbar-toggler-icon icon-bar text-light"></span>\n</button>\n\n\x3c!-- data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation" --\x3e\n'},uFKM:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("B/Tr"),controller:["$log",function(e){e.debug("PageHeaderController create");var l=this;l.$onInit=function(){e.debug("PageHeaderController init ",l.title,l.breadcrumbItems),l.titleValues=l.titleValues||{},l.subtitleValues=l.subtitleValues||{}}}],bindings:{title:"@",subtitle:"@?"}};l.default=n},vKWj:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("47k+"),controller:["$log","$rootScope","$location","spellService","filterService",function(e,l,t,n,a){e.debug("ModalSpellController create");var r=this;r.$onInit=function(){var n=angular.element("#modalSpell");n.on("show.bs.modal",function(){e.debug("ModalSpellController show.bs.modal"),l.title=l.spell.name+" - ",r.isFav=a.isFav(l.spell)}),n.on("hidden.bs.modal",function(){e.debug("ModalSpellController hidden.bs.modal",JSON.stringify(t.url())),l.title=""})},r.changeFav=function(e){a.changeFav(l.spell),r.isFav=a.isFav(l.spell)}}]};l.default=n},vNZY:function(e,l,t){"use strict";angular.module("app.services").factory("filterService",["$log","$window","CLASSES","SCHOOLS",function(e,l,t,n){var a={},r=l.localStorage;return a.school="any",a.favOnly=!!JSON.parse(r.getItem("FAV_ONLY"))&&JSON.parse(r.getItem("FAV_ONLY")),a.setFavOnly=function(e){a.favOnly=e,r.setItem("FAV_ONLY",JSON.stringify(a.favOnly))},a.filter=function(e){var l=!1;return(l=!a.filterText||e.name.toUpperCase().includes(a.filterText.toUpperCase()))&&a.favOnly&&(l=l&&a.isFav(e)),l&&(l=Array.isArray(n[a.school].search)?l&&n[a.school].search.includes(e.school):l&&n[a.school].search(e)),l},a.isFav=function(e){var l=JSON.parse(r.getItem("FAV_SPELLS"));return l&&l.length||(l=[]),l.includes(e.name)},a.changeFav=function(e){var l=JSON.parse(r.getItem("FAV_SPELLS"));l&&l.length||(l=[]),l.includes(e.name)?l.splice(l.indexOf(e.name),1):l.push(e.name),r.setItem("FAV_SPELLS",JSON.stringify(l))},a}])},wl6r:function(e,l){e.exports='<div class="wrapper">\n\n  <sidebar></sidebar>\n\n  <div class="main-panel">\n    <page-header title="ScrollBear" subtitle="Handy Spellbook"></page-header>\n\n    <div class="content">\n      <div class="row">\n        <div class="col-xl-8 col-centered">\n          <ui-view></ui-view>\n        </div>\n      </div>\n    </div>\n\n    <page-footer></page-footer>\n  </div>\n</div>\n\n<modal-spell></modal-spell>\n'},xODW:function(e,l,t){"use strict";angular.module("app.filters").filter("array",["$log",function(e){return function(e){return e?Array.isArray(e)?e.reduce(function(e,l,t){return e+(0==t?"":", ")+l},""):e:""}}])},"xt/U":function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={template:t("HT+c"),controller:["$log","$state","$scope","notificationService","filterService","spellService","spellbookService","CLASSES",function(e,l,t,n,a,r,s,c){e.debug("SpellbookBookController create");var o=this;function i(){o.total=Object.entries(o.book).reduce(function(e,l){return e+l[1].length},0)}o.$onInit=function(){e.debug("AppController init"),s.selectedCharacter?(o.prepared=s.selectedCharacter.prepared,o.book=s.selectedCharacter.book,Object.entries(o.book).forEach(function(e){e[1].sort();var l=[];o.book[e[0]]=e[1].filter(function(e){var t=!l.includes(e);return l.push(e),t})})):l.go("spellbook.characters"),s.saveCharacters(),i()},o.chooseSpell=function(e){r.showSpell(e)},o.delete=function(l,t){e.debug("SpellbookBookController ctrl.delete",l,t),s.selectedCharacter.book[l].splice(t,1),s.saveCharacters(),i()},o.addSpell=function(e,l){console.log(e,l),s.selectedCharacter.prepared?(s.selectedCharacter.preparedSpells||(s.selectedCharacter.preparedSpells={}),s.selectedCharacter.preparedSpells[e]||(s.selectedCharacter.preparedSpells[e]={spells:[]}),s.selectedCharacter.preparedSpells[e].spells.push({name:l})):(s.selectedCharacter.knownSpells||(s.selectedCharacter.knownSpells={}),s.selectedCharacter.knownSpells[e]||(s.selectedCharacter.knownSpells[e]={spells:[]}),s.selectedCharacter.knownSpells[e].spells.push(l)),s.saveCharacters(),console.log(s.selectedCharacter)},o.isSpellPrepared=function(e){if(s.selectedCharacter.prepared){if(s.selectedCharacter.preparedSpells)return Object.entries(s.selectedCharacter.preparedSpells).reduce(function(l,t){return l+t[1].spells.reduce(function(l,t){return l+(t.name==e?1:0)},0)},0)}else if(s.selectedCharacter.knownSpells)return Object.entries(s.selectedCharacter.knownSpells).reduce(function(l,t){return l||t[1].spells.reduce(function(l,t){return l||t==e},!1)},!1);return!1}}],bindings:{spells:"<",className:"<"}};l.default=n}});